<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" xml:lang="en-US">
<head profile="http://gmpg.org/xfn/11">
<title>A/B Testing in Ruby On Rails | Big Fast Blog</title>

<link rel="stylesheet" href="/wp-content/themes/hybrid/style.css" type="text/css" media="screen" />
<link rel="author" href="https://plus.google.com/101358683928607234715/posts"/>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="WordPress 3.0.1" />
<meta name="template" content="Hybrid 0.8" />
<link rel="pingback" href="/xmlrpc.php" />
<link rel="alternate" type="application/rss+xml" title="Big Fast Blog &raquo; Feed" href="http://feeds.feedburner.com/philwhelansblog" />
<link rel="alternate" type="application/rss+xml" title="Big Fast Blog &raquo; Comments Feed" href="http://feeds.feedburner.com/philwhelansblog" />
<link rel="alternate" type="application/rss+xml" title="Big Fast Blog &raquo; A/B Testing in Ruby On Rails Comments Feed" href="/ab-testing-in-ruby-on-rails/feed" />
<link rel='stylesheet' id='wp_greet_box_style-css'  href='/wp-content/plugins/wp-greet-box/css/style.css' type='text/css' media='all' />
<link rel='stylesheet' id='rpx_style-css'  href='/wp-content/plugins/rpx/files/style.css' type='text/css' media='all' />
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js'></script>
<script type='text/javascript' src='/wp-content/plugins/sharebar/js/sharebar.js'></script>
<script type='text/javascript' src='/wp-content/plugins/wp-greet-box/js/functions.js'></script>
<script type='text/javascript' src='/wp-content/plugins/wp-greet-box/js/js-mode.js'></script>
<script type='text/javascript' src='/wp-content/plugins/rpx/files/javascript.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" />
<link rel='index' title='Big Fast Blog' href='/' />
<link rel='start' title='Firefox &#8211; A must have web browser' href='/firefox-a-must-have-web-browser' />
<link rel='prev' title='Ruby’s EventMachine – Part 2 : Asynchronous != Faster' href='/ruby-eventmachine-part-2-asynchronous-not-equal-faster' />
<link rel='next' title='Ruby’s EventMachine – Part 3 : Thin' href='/rubys-eventmachine-part-3-thin' />
<link rel='shortlink' href='/?p=1741' />
<meta name="description" content="In this post I am going to demonstrate, step-by-step, a way to A/B test new features from within Ruby-On-Rails using FluidFeatures. FluidFeatures is currently in closed-beta and requires request for inclusion in the beta program. We are looking for enthusiastic A/B testers, so we can get feedback on the service before releasing it to the masses." />
<meta name="keywords" content="a/b testing,fluidfeatures,gem,multi-variant testing,ruby,ruby on rails" />
<link rel="canonical" href="/ab-testing-in-ruby-on-rails" />
  <link rel="stylesheet" href="/wp-content/plugins/sharebar/css/sharebar.css" type="text/css" media="screen" />
<script type="text/javascript">jQuery(document).ready(function($) { $('.sharebar').sharebar({horizontal:'true',swidth:'65',minwidth:1000,position:'left',leftOffset:20,rightOffset:10}); });</script>

</head>

<body>

<div id="body-container">

  <div id="header-container">

    <div id="header">

      <a href="/"><img src="http://commondatastorage.googleapis.com/philwhln/blog/images/big_fast_blog_title5.png" width="650" height="191" Alt="Phil Whelan's Big Fast Blog" border="0"></a>

    </div><!-- #header -->

  </div><!-- #header-container -->

  <div id="navigation">
      <div id="page-nav" class="page-nav"></div>
  </div><!-- #navigation -->

  <div id="container">

  <div id="content" class="hfeed content">

    <div id="utility-before-content" class="sidebar utility">

      <div id="text-13" class="widget widget_text widget-widget_text"><div class="widget-inside">      <div class="textwidget"><a href="https://twitter.com/philwhln" class="twitter-follow-button" data-show-count="true" data-lang="en">Follow @philwhln</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
    </div></div>
    </div><!-- #utility-before-content .utility -->

      <div id="post-1741" class="hentry post publish post-1 odd author-admin category-fluidfeatures-2 category-ruby-2 category-ruby-on-rails category-web-development post_tag-ab-testing post_tag-fluidfeatures post_tag-gem post_tag-multi-variant-testing post_tag-ruby post_tag-ruby-on-rails-2">

        <h1 class="post-title entry-title"><a href="/ab-testing-in-ruby-on-rails" title="A/B Testing in Ruby On Rails" rel="bookmark">A/B Testing in Ruby On Rails</a></h1><p class="byline"><span class="byline-prep byline-prep-author">By</span> <span class="author vcard">Phil Whelan</span> <span class="byline-prep byline-prep-published">on</span> <abbr class="published" title="Tuesday, October 23rd, 2012, 1:15 pm">October 23, 2012</abbr> </p>
        <div class="entry-content">
          <div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://feeds.feedburner.com/philwhelansblog"  rel="nofollow"><img src="/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://feeds.feedburner.com/philwhelansblog" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><ul id="sharebar" style="background:#;border-color:#;">
<li><a href="http://twitter.com/share" class="twitter-share-button" data-count="vertical" data-via="philwhln">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></li><li><iframe src="http://www.facebook.com/plugins/like.php?href=http://www.bigfastblog.com/ab-testing-in-ruby-on-rails&layout=box_count&show_faces=false&width=60&action=like&colorscheme=light&height=45" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:45px; height:60px;" allowTransparency="true"></iframe></li></ul><ul id="sharebarx">
<li><a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="philwhln">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></li><li><iframe src="http://www.facebook.com/plugins/like.php?href=http://www.bigfastblog.com/ab-testing-in-ruby-on-rails&layout=button_count&show_faces=false&width=85&action=like&colorscheme=light&height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:85px; height:21px;" allowTransparency="true"></iframe></li></ul><div style="border: 1px #ddd solid; margin: 5px; margin-bottom: 20px; padding: 5px; background-color: #FFFF99;">
<strong>Please note</strong>, the latest and greatest integration steps for the <strong>fluidfeatures-rails</strong> gem can be found on<br />
<a href="https://github.com/FluidFeatures/fluidfeatures-rails#readme">GitHub</a> at <a href="https://github.com/FluidFeatures/fluidfeatures-rails#readme">https://github.com/FluidFeatures/fluidfeatures-rails#readme</a></div>
<p>In this post I am going to demonstrate, step-by-step, a way to A/B test new features from within Ruby-On-Rails using FluidFeatures. FluidFeatures is currently in closed-beta and requires request for inclusion in the beta program. We are looking for enthusiastic A/B testers, so we can get feedback on the service before releasing it to the masses.</p>
<h2>A/B Testing?</h2>
<p>A/B testing or multi-variant testing is the best way to test your hypothesis about what your users want or what works best to get them to do what you want them to do. Generally, when these things come together, your users and your website have found a good fit and you are making a service that is more useful to your users, more intuitive, the right price or sometimes&#8230; just the right color. </p>
<p>With A/B testing you can find answers to questions, such as &#8220;Is a list a categories down the side of the web page better, or a search box with a cleaner design?&#8221;.</p>
<p>The general idea of A/B testing is that some users will see one version of a website feature and other users see a different version. These two versions of the feature might ultimately provide the same functionality, but provide the user with a slightly different experience, depending on which version they are shown. The success of the test will generally be based on the user taking some action. The winner is determined by whether version A or version B receives the most success hits. If the difference in success hits between A and B is significant, then this is a clear indication of which one you should implement for all of your user-base.</p>
<p>The simplest A/B tests include scenarios like &#8220;the button is on the right&#8221; vs &#8220;the button is on the left&#8221; or &#8220;the background is green&#8221; vs &#8220;the background is blue&#8221;. Whilst these might sound like pointless exercises, the Gods of A/B testing have decided that sometimes these small changes really do push up the conversion rate. Whether it is the psychology of colors, the genetically encoded aesthetic preferences we all carry or some ancient voodoo, if the statistics are pointing at a winning version of a feature of your website, then you would be a fool to ignore it.</p>
<p>Even a small consistent difference will pay back with compound interest when combined with numerous other changes methodically measured in the same way.</p>
<p>While we all think we know the best solution, the best design and the best UX, in this ever changing world, we really know nothing unless we have the statistics to back it up. Anyone who is doing anything of significance on the web is doing some form of measuring and A/B testing.</p>
<h2>Ruby Or JavaScript?</h2>
<p>When I say, &#8220;A/B Testing in Ruby On Rails&#8221;, you probably think I am talking about something like <a href="https://www.optimizely.com/">Optimizely</a> or <a href="http://analytics.blogspot.ca/2012/06/helping-to-create-better-websites.html">Google Website Optimizer</a> (now <a href="http://analytics.blogspot.ca/2012/06/helping-to-create-better-websites.html">Google Content Experiments</a>). These are great solutions and if you are serious about A/B testing your Ruby-On-Rails application then you should <a href="http://www.youtube.com/watch?v=0S0IrbwpfzE">check them out</a>. These solutions are JavaScript solutions which work by dropping a JavaScript snippet onto your webpage and changing the user&#8217;s experience at the browser level. The JavaScript will make the choice of what the current user sees by changing the DOM (HTML on the page) or redirecting them to another page.</p>
<p>Managing this in JavaScript makes it easy to setup, but it also means that all the A/B versions are available to all users and are just obscured by the browser. The server has to potentially render the full content for both versions for each visitor. This is not ideal if you are testing a beta-version of a feature and you do not want it to affect all your users. Or you are testing pricing or new features where you really do not want any chance of someone hacking your JavaScript to expose the unpublished features. Your marketing team would not be happy.</p>
<p>So, in short, I talking about taking this down to the Ruby level on the server-side.</p>
<h2>Benefits of Server-Side A/B Testing</h2>
<p>When a user visits your website, the earlier you know which features they will see, or which versions of which features, the less work you have to do. It also opens up a whole new world of A/B testing. Have you ever wanted to test different variations of an SQL query against each other in production and see which is faster? Why not test the newer SQL query on 1% of your user-base?</p>
<p>If your A/B testing originates on the server-side, a feature version&#8217;s per-user enabled status is a simple boolean that is now available at <em>every</em> level of your architecture, not <em>just</em> in the browser. You can look at the impact of that enabled status in aggregate against specific goals on your website (e.g. &#8220;user clicks on the Buy button&#8221;) or offline (e.g. &#8220;user sends us an email&#8221;) using the same system.</p>
<p>If you manage your A/B testing on the server-side then it is easier to push information up to the browser for inclusion in Google Analytics. If you manage it in the browser, using JavaScript, then there is little the server-side can do once the web page is already rendered.</p>
<h2>Let&#8217;s Do It!</h2>
<p>First we add the <strong>fluidfeatures-rails</strong> gem to your Rails application&#8217;s Gemfile.</p>
<pre>gem "<a href="http://rubygems.org/gems/fluidfeatures-rails">fluidfeatures-rails</a>"</pre>
<p>In your <strong>app/controllers/application_controller.rb</strong> file you need a method that fluidfeatures-rails can call to find out who the current user is, or if the user is anonymous. In our example we call this <strong>get_current_user</strong>, which will return a Hash with at least and <strong>:id</strong> value.</p>
<p><strong>user[:id]</strong> is the unique identifier of this user. If we do not have this then we assume this is an anonymous (not logged in) user. If the user is anonymous then fluidfeatures-rails generates its own anonymous-user-id and sets a cookie so that the anonymous user receives a consistent experience on each request.</p>
<div class="CodeRay">
<div class="code">
<pre><span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">fluidfeatures_current_user</span>(verbose=<span style="color:#069">false</span>)
  current_user = get_current_user
  <span style="color:#080;font-weight:bold">if</span> current_user
    <span style="color:#777"># logged in user</span>
    { <span style="color:#A60">:id</span> =&gt; current_user[<span style="color:#A60">:id</span>] }
  <span style="color:#080;font-weight:bold">else</span>
    <span style="color:#777"># anonymous user</span>
    <span style="color:#069">nil</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</pre>
</div>
</div>
<p>Next, load the fluidfeatures-rails initializer at the end of you Applications instantiation.</p>
<div class="CodeRay">
<div class="code">
<pre>
<span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">MyRailsApp</span>
  <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Application</span> &lt; <span style="color:#036;font-weight:bold">Rails</span>::<span style="color:#036;font-weight:bold">Application</span>

    <span style="color:#036;font-weight:bold">FluidFeatures</span>::<span style="color:#036;font-weight:bold">Rails</span>.initializer
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</pre>
</div>
</div>
<p>Great. Now we can start plugging in our feature versions into our request handler. We have one feature called &#8220;ab-test&#8221; with version &#8220;a&#8221; and &#8220;b&#8221;&#8230;</p>
<div class="CodeRay">
<div class="code">
<pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">AbTestController</span> &lt; <span style="color:#036;font-weight:bold">ApplicationController</span>
  <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">index</span>
    <span style="color:#080;font-weight:bold">if</span> fluidfeature(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">ab-test</span><span style="color:#710">&quot;</span></span>, { <span style="color:#A60">:version</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">a</span><span style="color:#710">&quot;</span></span> })
      <span style="color:#777"># Our version &quot;A&quot; code here</span>
    <span style="color:#080;font-weight:bold">end</span>

    <span style="color:#080;font-weight:bold">if</span> fluidfeature(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">ab-test</span><span style="color:#710">&quot;</span></span>, { <span style="color:#A60">:version</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">b</span><span style="color:#710">&quot;</span></span> })
      <span style="color:#777"># Our version &quot;B&quot; code here</span>
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span></pre>
</div>
</div>
<h2>Hooking Up With The Dashboard</h2>
<p>Once we are logged into FluidFeatures.com, we can create a new &#8220;application&#8221;. This can be found at <a href="http://www.fluidfeatures.com/dashboard">http://www.fluidfeatures.com/dashboard</a></p>
<p><img src="http://commondatastorage.googleapis.com/philwhln/blog/images/ab-test-rails/new-application.png"></p>
<p>Give our application a name.</p>
<p><img src="http://commondatastorage.googleapis.com/philwhln/blog/images/ab-test-rails/input-app-name.png"></p>
<p>Find our application&#8217;s credentials.</p>
<p><img src="http://commondatastorage.googleapis.com/philwhln/blog/images/ab-test-rails/click-credentials.png"></p>
<p>We will copy these credentials and pass them to our rails application as environment variables.</p>
<p><img src="http://commondatastorage.googleapis.com/philwhln/blog/images/ab-test-rails/credentials.png"></p>
<h2>Flesh Out Our App</h2>
<p>app/controllers/application_controller.rb</p>
<div class="CodeRay">
<div class="code">
<pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">ApplicationController</span> &lt; <span style="color:#036;font-weight:bold">ActionController</span>::<span style="color:#036;font-weight:bold">Base</span>
  protect_from_forgery

  <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">get_current_user</span>
    <span style="color:#777"># this app does not have a concept of logged-in users</span>
    <span style="color:#069">nil</span>
  <span style="color:#080;font-weight:bold">end</span>

  <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">fluidfeatures_current_user</span>(verbose=<span style="color:#069">false</span>)
    current_user = get_current_user
    <span style="color:#080;font-weight:bold">if</span> current_user
      <span style="color:#777"># logged in user</span>
      { <span style="color:#A60">:id</span> =&gt; current_user[<span style="color:#A60">:id</span>] }
    <span style="color:#080;font-weight:bold">else</span>
      <span style="color:#777"># anonymous user</span>
      {}
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>

<span style="color:#080;font-weight:bold">end</span>
</pre>
</div>
</div>
<p>app/controllers/ab_test_controller.rb</p>
<div class="CodeRay">
<div class="code">
<pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">AbTestController</span> &lt; <span style="color:#036;font-weight:bold">ApplicationController</span>
  <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">index</span>
    <span style="color:#080;font-weight:bold">if</span> fluidfeature(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">ab-test</span><span style="color:#710">&quot;</span></span>, { <span style="color:#A60">:version</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">a</span><span style="color:#710">&quot;</span></span> })
      <span style="color:#777"># Our version &quot;A&quot; code here</span>
      render <span style="color:#A60">:text</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Do you like Apples? &lt;a href=</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">yes</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">&gt;YES&lt;/a&gt; | &lt;a href=</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">no</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">&gt;NO&lt;/a&gt;</span><span style="color:#710">&quot;</span></span>
      <span style="color:#080;font-weight:bold">return</span>
    <span style="color:#080;font-weight:bold">end</span>
    <span style="color:#080;font-weight:bold">if</span> fluidfeature(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">ab-test</span><span style="color:#710">&quot;</span></span>, { <span style="color:#A60">:version</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">b</span><span style="color:#710">&quot;</span></span> })
      <span style="color:#777"># Our version &quot;B&quot; code here</span>
      render <span style="color:#A60">:text</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Do you like Bananas? &lt;a href=</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">yes</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">&gt;YES&lt;/a&gt; | &lt;a href=</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">no</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">&gt;NO&lt;/a&gt;</span><span style="color:#710">&quot;</span></span>
      <span style="color:#080;font-weight:bold">return</span>
    <span style="color:#080;font-weight:bold">end</span>
    render <span style="color:#A60">:text</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Nothing to see here</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>

  <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">yes</span>
    fluidgoal(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">yes</span><span style="color:#710">&quot;</span></span>)
    render <span style="color:#A60">:text</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Great. Me too!</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>

  <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">no</span>
    fluidgoal(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">no</span><span style="color:#710">&quot;</span></span>)
    render <span style="color:#A60">:text</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">That's a shame. I love them!</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>

<span style="color:#080;font-weight:bold">end</span>
</pre>
</div>
</div>
<h2>Running Our App</h2>
<p>We pass in the FluidFeatures application credentials we obtained from the dashboard (see above) when we run <strong>script/rails server</strong>.</p>
<pre>FLUIDFEATURES_APPID=1wy1vvnue4tgh \
FLUIDFEATURES_SECRET=jzJm2JA2mhURGC8DOivVbt23h5rt1GSfFaasCy5s \
FLUIDFEATURES_BASEURI=http://local.fluidfeatures.com/service \
script/rails server
<span style="color: #888">=> fluidfeatures-rails initializing as app 1wy1vvnue4tgh with http://local.fluidfeatures.com/service
=> Booting WEBrick
=> Rails 3.2.8 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-10-22 14:31:37] INFO  WEBrick 1.3.1
[2012-10-22 14:31:37] INFO  ruby 1.9.3 (2012-04-20) [x86_64-darwin11.4.0]
[2012-10-22 14:31:37] INFO  WEBrick::HTTPServer#start: pid=61664 port=3000</span>
</pre>
<p>fluidfeatures-rails detects new features when it encounters them at run-time, then reports them back to the dashboard. When we make  our first make I request, neither &#8220;a&#8221; or &#8220;b&#8221; versions are enabled.</p>
<p><img src="http://commondatastorage.googleapis.com/philwhln/blog/images/ab-test-rails/nothing-to-see.png"></p>
<p>But during this request we have reported back to the fluidfeatures service that we have a new feature &#8220;ab-test&#8221; and we have detected two versions, &#8220;a&#8221; and &#8220;b&#8221;.</p>
<p>If we look at the dashboard we will see this feature.</p>
<p><img src="http://commondatastorage.googleapis.com/philwhln/blog/images/ab-test-rails/ab-test-feature-detected.png"></p>
<h2>Configuring The Split</h2>
<p>Let&#8217;s set version &#8220;a&#8221; to 75% exposure and version &#8220;b&#8221; to 25% exposure. This means that 75% of the visitors will see version &#8220;a&#8221; and 25% will see version &#8220;b&#8221;.</p>
<p>From the code above we can see that version &#8220;a&#8221; will show the message &#8220;Do you like Apples?&#8221; and version &#8220;b&#8221; will show the message &#8220;Do you like Bananas?&#8221;. Both will give links to &#8220;YES&#8221; and &#8220;NO&#8221;. These &#8220;YES&#8221; and &#8220;NO&#8221; links are our goals. We want our users to click these links and we will track how successful each version of our question is.</p>
<p><img src="http://commondatastorage.googleapis.com/philwhln/blog/images/ab-test-rails/ab-test-75-25.png"></p>
<h2>And We Are Live!</h2>
<p>If we now visit the application, instead of seeing &#8220;Nothing to see here&#8221;, we know we have a 75% chance of seeing &#8220;Do you like Apples?&#8221; and a 25% chance of seeing &#8220;Do you like Bananas?&#8221;.</p>
<p>We see &#8220;Do you like Bananas?&#8221;.</p>
<p><img src="http://commondatastorage.googleapis.com/philwhln/blog/images/ab-test-rails/do-you-like-bananas.png"></p>
<h2>Keeping Score</h2>
<p>Let&#8217;s click on &#8220;YES&#8221; and indicate that we do like bananas.</p>
<p><img src="http://commondatastorage.googleapis.com/philwhln/blog/images/ab-test-rails/great-me-too.png"></p>
<p>Meanwhile, back on the dashboard, we see the detected goal pop-up.</p>
<p><img src="http://commondatastorage.googleapis.com/philwhln/blog/images/ab-test-rails/one-banana-lover.png"></p>
<p>Statistically not very significant, but we can see we are tracking some statistics.</p>
<h2>Where&#8217;s The Apples?</h2>
<p>No matter how many times I refresh my browser, I see &#8220;Do you like Bananas?&#8221; due to fluidfeatures-rails giving me a consistent experience while using this application.</p>
<p>If I open the application in a different browser, I now see &#8220;Do you like Apples?&#8221; and I can click &#8220;YES&#8221; there, too.</p>
<h2>Statistical Significance</h2>
<p>Over time, we get more clicks on &#8220;YES&#8221; and &#8220;NO&#8221; for &#8220;apples&#8221; and &#8220;bananas&#8221;. This application is really popular!</p>
<p><img src="http://commondatastorage.googleapis.com/philwhln/blog/images/ab-test-rails/yes-goal.png"></p>
<p>We can see that &#8220;a&#8221; (for &#8220;apples&#8221;) received more clicks than &#8220;b&#8221; (for &#8220;bananas&#8221;). 29 for &#8220;a&#8221; vs 20 &#8220;b&#8221;. Although, from the percentages it appears that &#8220;b&#8221; is more than twice as popular. How can that be?</p>
<p>If we look back at the feature settings, we are only showing &#8220;b&#8221; to 25% of the users that come to our site, so each click is much more statistically significant than the clicks we receive from &#8220;a&#8221;, which is shown to 75% of our users.</p>
<p>We can change the exposure level that each version receives and FluidFeatures will keep track of the statistical significance of each goal (&#8220;YES&#8221; click) at the time it occurs.</p>
<p><img src="http://commondatastorage.googleapis.com/philwhln/blog/images/ab-test-rails/full-dashboard.png"></p>
<h2>Download The Code</h2>
<p>You can download the code from the application at<br />
<a href="https://github.com/FluidFeatures/MyRailsApp">https://github.com/FluidFeatures/MyRailsApp</a></p>
<h2>Learn More</h2>
<p>In this video, we demonstrate FluidFeatures for feature rollout and A/B testing.</p>
<div id="wistia_cu1iy2f0vn" class="wistia_embed" style="width:640px;height:400px;" data-video-width="640" data-video-height="400"><object id="wistia_cu1iy2f0vn_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:400px;position:relative;width:640px;"><param name="movie" value="http://embed-0.wistia.com/flash/embed_player_v2.0.swf?2012-06-01"></param><param name="allowfullscreen" value="true"></param><param name="allowscriptaccess" value="always"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="banner=true&#038;controlsVisibleOnLoad=true&#038;hdUrl%5Bheight%5D=800&#038;hdUrl%5Btype%5D=hdflv&#038;hdUrl%5Burl%5D=http%3A%2F%2Fembed-0.wistia.com%2Fdeliveries%2Ff8e538273e5d816ecc847577438edb59cd78db87.bin&#038;hdUrl%5Bwidth%5D=1280&#038;mediaDuration=522.7&#038;showVolume=true&#038;stillUrl=http%3A%2F%2Fembed-0.wistia.com%2Fdeliveries%2F1134c1888f3ffc77f96ad2242984b943e67a16c3.jpg%3Fimage_crop_resized%3D640x400&#038;unbufferedSeek=true&#038;videoUrl=http%3A%2F%2Fembed-0.wistia.com%2Fdeliveries%2F26b9223ed5ac05de797190485ae6ca65fc686186.bin"></param><embed src="http://embed-0.wistia.com/flash/embed_player_v2.0.swf?2012-06-01" allowfullscreen="true" allowscriptaccess="always" bgcolor=#000000 flashvars="banner=true&#038;controlsVisibleOnLoad=true&#038;hdUrl%5Bheight%5D=800&#038;hdUrl%5Btype%5D=hdflv&#038;hdUrl%5Burl%5D=http%3A%2F%2Fembed-0.wistia.com%2Fdeliveries%2Ff8e538273e5d816ecc847577438edb59cd78db87.bin&#038;hdUrl%5Bwidth%5D=1280&#038;mediaDuration=522.7&#038;showVolume=true&#038;stillUrl=http%3A%2F%2Fembed-0.wistia.com%2Fdeliveries%2F1134c1888f3ffc77f96ad2242984b943e67a16c3.jpg%3Fimage_crop_resized%3D640x400&#038;unbufferedSeek=true&#038;videoUrl=http%3A%2F%2Fembed-0.wistia.com%2Fdeliveries%2F26b9223ed5ac05de797190485ae6ca65fc686186.bin" name="wistia_cu1iy2f0vn_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object></div>
<p><script charset="ISO-8859-1" src="http://fast.wistia.com/static/concat/E-v1%2CpostRoll-v1.js"></script><br />
<script>
wistiaEmbed = Wistia.embed("cu1iy2f0vn", {
  version: "v1",
  videoWidth: 640,
  videoHeight: 400,
  volumeControl: true,
  controlsVisibleOnLoad: true
});
Wistia.plugin.postRoll(wistiaEmbed, {
  version: "v1",
  text: "Click here to visit<br/>FluidFeatures.com",
  link: "http://www.fluidfeatures.com/?utm_source=bigfastblog.com&#038;utm_medium=video&#038;utm_content=ab_testing_in_rails&#038;utm_campaign=interest",
  style: {
    backgroundColor: "#616161",
    color: "#ffffff",
    fontSize: "36px",
    fontFamily: "Gill Sans, Helvetica, Arial, sans-serif"
  }
});
</script><br />
<script charset="ISO-8859-1" src="http://fast.wistia.com/embed/medias/cu1iy2f0vn/metadata.js"></script></p>
<p><a href="https://github.com/FluidFeatures/userviews">https://github.com/FluidFeatures/userviews</a></p>
<h2>FluidFeatures Trial</h2>
<p>FluidFeatures is a new service and the most important thing for the service right now is quality feedback from quality users. We are in closed beta right now and looking for some great Rails developers to start A/B testing their applications using FluidFeatures.</p>
<p>Please sign-up to FluidFeatures Beta Users mailing-list if you are a Ruby On Rails developer and you are interested in using this service.</p>
<p><!-- Begin MailChimp Signup Form --></p>
<link href="http://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
<div id="mc_embed_signup">
<form action="http://scalablecreations.us2.list-manage.com/subscribe/post?u=707d1f1a27e889d195e47a636&amp;id=d7b1c949a8" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
<div class="clear">
<input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
</form>
</div>
<h2>Updated</h2>
<ul>
<li>Changed fluidfeature_current_user to fluidfeature<strong>s</strong>_current_user <small>(2013-01-17)</small></li>
</ul>
<p><!--End mc_embed_signup--></p>
<h2>Posted in : <a href="/category/ruby-2"> Ruby</a></h2>
                  </div><!-- .entry-content -->

        <p class="entry-meta"><span class="category">Posted in <a href="/category/fluidfeatures-2" rel="tag">FluidFeatures</a>, <a href="/category/ruby-2" rel="tag">Ruby</a>, <a href="/category/ruby-on-rails" rel="tag">Ruby On Rails</a>, <a href="/category/web-development" rel="tag">Web Development</a></span> <span class="post_tag">| Tagged <a href="/tag/ab-testing" rel="tag">a/b testing</a>, <a href="/tag/fluidfeatures" rel="tag">fluidfeatures</a>, <a href="/tag/gem" rel="tag">gem</a>, <a href="/tag/multi-variant-testing" rel="tag">multi-variant testing</a>, <a href="/tag/ruby" rel="tag">ruby</a>, <a href="/tag/ruby-on-rails-2" rel="tag">ruby on rails</a></span> | <a class="comments-link" href="/ab-testing-in-ruby-on-rails#comments" title="Comment on A/B Testing in Ruby On Rails">1 Response</a></p>
      </div><!-- .hentry -->

    <div id="utility-after-singular" class="sidebar utility">

      <div id="text-16" class="widget widget_text widget-widget_text"><div class="widget-inside">      <div class="textwidget"><a href="https://twitter.com/philwhln" class="twitter-follow-button" data-show-count="true" data-lang="en">Follow @philwhln</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
    </div></div>
    </div><!-- #utility-after-singular .utility -->

<div id="comments-template">

    <div id="comments">

      <h3 id="comments-number" class="comments-header">One response to &#8220;A/B Testing in Ruby On Rails&#8221;</h3>

      <ol class="comment-list">

  <li id="comment-23676" class="comment even thread-even depth-1 comment reader">

    <a href="http://cophenetic.com" rel="external nofollow" title="alex kuznetsov"><img alt='alex kuznetsov' src='http://1.gravatar.com/avatar/d03097fc0e24158dcddf952f9d4d0800?s=80&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG' class='avatar avatar-80 photo' height='80' width='80' /></a><div class="comment-meta comment-meta-data"><div class="comment-author vcard"><cite class="fn" title="http://cophenetic.com"><a href="http://cophenetic.com" title="alex kuznetsov" class="url" rel="external nofollow">alex kuznetsov</a></cite></div><!-- .comment-author .vcard --> <span class="published"><abbr class="comment-date" title="Tuesday, October 23rd, 2012, 8:24 pm">October 23, 2012</abbr> at <abbr class="comment-time" title="Tuesday, October 23rd, 2012, 8:24 pm">8:24 pm</abbr></span> | <a class="permalink" href="/ab-testing-in-ruby-on-rails/comment-page-1#comment-23676" title="Permalink to comment ">Permalink</a>  </div>
    <div class="comment-text">

      <p>Interesting gem. I don&#8217;t usually use these often, but it has a nifty ui, so I might give it a try.</p>
    </div><!-- .comment-text -->

  </li><!-- .comment -->      </ol><!-- .comment-list -->

              <div class="comment-navigation paged-navigation">
                  </div><!-- .comment-navigation -->

    </div><!-- #comments -->

</div><!-- #comments-template -->

    <div class="navigation-links">
      <a href="/ruby-eventmachine-part-2-asynchronous-not-equal-faster" rel="prev"><span class="previous">&laquo; Previous</span></a>      <a href="/rubys-eventmachine-part-3-thin" rel="next"><span class="next">Next &raquo;</span></a>    </div><!-- .navigation-links -->

  </div><!-- .content .hfeed -->

  <div id="primary" class="sidebar aside">

        <div id="popularity-lists-1" class="widget widget_popularity_lists widget-widget_popularity_lists"><div class="widget-inside">      <h3 class="widget-title">Top Posts</h3>      <ul>
      <li><a href="/homebrew-intro-to-the-mac-os-x-package-installer">Homebrew - Intro To The Mac OS X Package Installer</a></li><li><a href="/quoras-technology-examined">Quora's Technology Examined</a></li><li><a href="/gitolite-installation-step-by-step">Gitolite Installation Step-By-Step</a></li><li><a href="/how-to-get-experience-working-with-large-datasets">How To Get Experience Working With Large Datasets</a></li><li><a href="/install-gitolite-to-manage-your-git-repositories">Install Gitolite To Manage Your Git Repositories</a></li><li><a href="/embed-base64-encoded-images-inline-in-html">Embed Base64-Encoded Images Inline In HTML</a></li><li><a href="/map-reduce-with-ruby-using-hadoop">Map-Reduce With Ruby Using Hadoop</a></li><li><a href="/highchart-vs-flot-js-comparing-javascript-graphing-engines">Highchart Vs Flot.js - Comparing JavaScript Graphing Engines </a></li>      </ul>
    </div></div><div id="hybrid-tags-2" class="widget tags widget-tags"><div class="widget-inside"><h3 class="widget-title">Tags</h3><p class="post_tag-cloud term-cloud"><a href='/tag/amazon-ec2' class='tag-link-211' title='6 topics' style='font-size: 15.194444444444pt;'>amazon ec2</a> <a href='/tag/android' class='tag-link-74' title='2 topics' style='font-size: 8pt;'>android</a> <a href='/tag/apple' class='tag-link-20' title='3 topics' style='font-size: 10.333333333333pt;'>apple</a> <a href='/tag/cassandra' class='tag-link-204' title='3 topics' style='font-size: 10.333333333333pt;'>cassandra</a> <a href='/tag/customers-2' class='tag-link-148' title='2 topics' style='font-size: 8pt;'>customers</a> <a href='/tag/data-processing-2' class='tag-link-107' title='5 topics' style='font-size: 13.833333333333pt;'>data processing</a> <a href='/tag/entrepreneur' class='tag-link-123' title='2 topics' style='font-size: 8pt;'>entrepreneur</a> <a href='/tag/entrepreneurship' class='tag-link-117' title='2 topics' style='font-size: 8pt;'>entrepreneurship</a> <a href='/tag/eventmachine-2' class='tag-link-422' title='3 topics' style='font-size: 10.333333333333pt;'>eventmachine</a> <a href='/tag/gem' class='tag-link-274' title='3 topics' style='font-size: 10.333333333333pt;'>gem</a> <a href='/tag/git' class='tag-link-177' title='3 topics' style='font-size: 10.333333333333pt;'>git</a> <a href='/tag/gitolite' class='tag-link-178' title='2 topics' style='font-size: 8pt;'>gitolite</a> <a href='/tag/google' class='tag-link-89' title='2 topics' style='font-size: 8pt;'>google</a> <a href='/tag/hadoop' class='tag-link-102' title='7 topics' style='font-size: 16.166666666667pt;'>hadoop</a> <a href='/tag/hbase' class='tag-link-264' title='4 topics' style='font-size: 12.277777777778pt;'>hbase</a> <a href='/tag/hdfs' class='tag-link-103' title='4 topics' style='font-size: 12.277777777778pt;'>hdfs</a> <a href='/tag/high-scalability' class='tag-link-114' title='3 topics' style='font-size: 10.333333333333pt;'>high scalability</a> <a href='/tag/homebrew' class='tag-link-216' title='4 topics' style='font-size: 12.277777777778pt;'>homebrew</a> <a href='/tag/install' class='tag-link-51' title='2 topics' style='font-size: 8pt;'>install</a> <a href='/tag/iphone' class='tag-link-65' title='2 topics' style='font-size: 8pt;'>iphone</a> <a href='/tag/java' class='tag-link-276' title='3 topics' style='font-size: 10.333333333333pt;'>java</a> <a href='/tag/location' class='tag-link-136' title='2 topics' style='font-size: 8pt;'>location</a> <a href='/tag/mac-osx' class='tag-link-59' title='2 topics' style='font-size: 8pt;'>mac osx</a> <a href='/tag/memcached' class='tag-link-306' title='4 topics' style='font-size: 12.277777777778pt;'>memcached</a> <a href='/tag/mongodb' class='tag-link-210' title='5 topics' style='font-size: 13.833333333333pt;'>mongodb</a> <a href='/tag/mysql' class='tag-link-293' title='3 topics' style='font-size: 10.333333333333pt;'>mysql</a> <a href='/tag/nginx' class='tag-link-326' title='4 topics' style='font-size: 12.277777777778pt;'>nginx</a> <a href='/tag/nosql' class='tag-link-205' title='6 topics' style='font-size: 15.194444444444pt;'>nosql</a> <a href='/tag/perl' class='tag-link-377' title='3 topics' style='font-size: 10.333333333333pt;'>perl</a> <a href='/tag/phone' class='tag-link-72' title='3 topics' style='font-size: 10.333333333333pt;'>phone</a> <a href='/tag/postgresql' class='tag-link-221' title='3 topics' style='font-size: 10.333333333333pt;'>postgresql</a> <a href='/tag/python' class='tag-link-355' title='5 topics' style='font-size: 13.833333333333pt;'>python</a> <a href='/tag/rails' class='tag-link-172' title='2 topics' style='font-size: 8pt;'>rails</a> <a href='/tag/redis' class='tag-link-301' title='3 topics' style='font-size: 10.333333333333pt;'>redis</a> <a href='/tag/ruby' class='tag-link-166' title='15 topics' style='font-size: 22pt;'>ruby</a> <a href='/tag/ruby-on-rails-2' class='tag-link-157' title='6 topics' style='font-size: 15.194444444444pt;'>ruby on rails</a> <a href='/tag/scala' class='tag-link-302' title='3 topics' style='font-size: 10.333333333333pt;'>scala</a> <a href='/tag/ssh-keygen' class='tag-link-180' title='2 topics' style='font-size: 8pt;'>ssh-keygen</a> <a href='/tag/startup' class='tag-link-119' title='3 topics' style='font-size: 10.333333333333pt;'>startup</a> <a href='/tag/tornado' class='tag-link-330' title='6 topics' style='font-size: 15.194444444444pt;'>tornado</a> <a href='/tag/twitter' class='tag-link-133' title='2 topics' style='font-size: 8pt;'>twitter</a> <a href='/tag/vancouver' class='tag-link-120' title='2 topics' style='font-size: 8pt;'>vancouver</a> <a href='/tag/web-development-2' class='tag-link-193' title='5 topics' style='font-size: 13.833333333333pt;'>web-development</a> <a href='/tag/whirr' class='tag-link-223' title='3 topics' style='font-size: 10.333333333333pt;'>whirr</a> <a href='/tag/wikipedia' class='tag-link-174' title='2 topics' style='font-size: 8pt;'>wikipedia</a></p></div></div>

  </div><!-- #primary .aside -->

  </div><!-- #container -->

  <div id="footer-container">

    <div id="footer">

      <small>Copyright &#169; 2016 <a class="site-link" href="/" title="Big Fast Blog" rel="home"><span>Big Fast Blog</span></a> | Vancouver, BC, Canada</small>
    </div><!-- #footer -->

  </div><!-- #footer-container -->

</div><!-- #body-container -->

</body>
</html>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-15826070-1', 'auto');
  ga('send', 'pageview');

</script>
