{"componentChunkName":"component---src-templates-post-template-js","path":"/quoras-technology-examined","result":{"data":{"markdownRemark":{"id":"c2538cc1-6ec7-58b7-a2f7-d8bffe18a106","html":"<p><a href=\"https://www.flickr.com/photos/a_mason/4280360776/\" title=\"Magnifying the Circuit Board by Andrew Mason, on Flickr\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 450px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEEA//EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAZXKxwAT/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAECESEx/9oACAEBAAEFAki1GMd9q9j0/8QAFREBAQAAAAAAAAAAAAAAAAAAECH/2gAIAQMBAT8Bh//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAEDBQAAAAAAAAAAAAAAAAABEBECITEyQf/aAAgBAQAGPwKVs2BTaqet/8QAGRABAQEBAQEAAAAAAAAAAAAAAREAIUFx/9oACAEBAAE/IZrHwTIXX7MIxrJap6TOPaoPNzqzf//aAAwDAQACAAMAAAAQ1w//xAAWEQEBAQAAAAAAAAAAAAAAAAAhARD/2gAIAQMBAT8Qgc//xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAgEBPxCn/8QAHBABAAICAwEAAAAAAAAAAAAAAQARITFBUXHB/9oACAEBAAE/EBFU0C2vcGDJsPHrUV7IaupgSLdwTBjyKLZEunH2JuLbHM//2Q==&apos;); background-size: cover; display: block;\"></span>\n  <picture>\n        <source srcset=\"/static/a3c802d7812dcd258a35cf55a1eaa5f5/8ac56/quora_microscope.webp 240w,\n/static/a3c802d7812dcd258a35cf55a1eaa5f5/8626f/quora_microscope.webp 450w\" sizes=\"(max-width: 450px) 100vw, 450px\" type=\"image/webp\">\n        <source srcset=\"/static/a3c802d7812dcd258a35cf55a1eaa5f5/09b79/quora_microscope.jpg 240w,\n/static/a3c802d7812dcd258a35cf55a1eaa5f5/20e5d/quora_microscope.jpg 450w\" sizes=\"(max-width: 450px) 100vw, 450px\" type=\"image/jpeg\">\n        <img class=\"gatsby-resp-image-image\" src=\"/static/a3c802d7812dcd258a35cf55a1eaa5f5/20e5d/quora_microscope.jpg\" alt=\"Magnifying the Circuit Board\" title=\"Magnifying the Circuit Board\" loading=\"lazy\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n      </picture>\n    </span></a></p>\n<p>Quora has taken the tech and entrepreneurial world by storm, providing a system that works so fluidly that it is sometimes hard to see what the big fuss is all about. This slick tool is powered, not only by an intelligent crowd of askers and answerers, but by a well-crafted backend created by co-founders who honed their skills at Facebook.</p>\n<p>It is not surprising that, with all the smart people using this smart tool, there are many pondering on how it works so well. The NoSQL boffins scratch their heads and ponder such questions as, “<a href=\"https://www.quora.com/Why-does-Quora-use-MySQL-as-the-data-store-rather-than-NoSQLs-such-as-Cassandra-MongoDB-CouchDB-etc\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Why does Quora use MySQL as the data store rather than NoSQLs such as Cassandra, MongoDB, CouchDB, etc?</a>“.</p>\n<p>In this blog post I will delve into the snippets of information available on Quora and look at Quora from a technical perspective. What technical decisions have they made? What does their architecture look like? What languages and frameworks do they use? How do they make that search bar respond so quickly?</p>\n<ul>\n<li><a href=\"/quoras-technology-examined#components-of-quora\">Components Of Quora</a></li>\n<li><a href=\"/quoras-technology-examined#whats-cooking-under-that-hood\">What’s Cooking Under That Hood?</a></li>\n<li><a href=\"/quoras-technology-examined#the-search-box\">The Search-Box</a></li>\n<li><a href=\"/quoras-technology-examined#webnode2-and-livenode\">Webnode2 And LiveNode</a></li>\n<li><a href=\"\">Amazon Web Services</a></li>\n<li><a href=\"/quoras-technology-examined#ubuntu-linux\">Ubuntu Linux</a></li>\n<li><a href=\"/quoras-technology-examined#static-content\">Static Content</a></li>\n<li><a href=\"/quoras-technology-examined#haproxy-load-balancing\">HAProxy Load-Balancing</a></li>\n<li><a href=\"/quoras-technology-examined#nginx\">Nginx</a></li>\n<li><a href=\"/quoras-technology-examined#pylons-and-paste\">Pylons And Paste</a></li>\n<li><a href=\"/quoras-technology-examined#python\">Python</a></li>\n<li><a href=\"/quoras-technology-examined#thrift\">Thrift</a></li>\n<li><a href=\"/quoras-technology-examined#tornado\">Tornado</a></li>\n<li><a href=\"/quoras-technology-examined#long-polling-comet\">Long Polling (Comet)</a></li>\n<li><a href=\"/quoras-technology-examined#mysql\">MySQL</a></li>\n<li><a href=\"/quoras-technology-examined#memcached\">Memcached</a></li>\n<li><a href=\"/quoras-technology-examined#git\">Git</a></li>\n<li><a href=\"/quoras-technology-examined#charlie-cheever-follows-14-rules-for-faster-loading-web-sites\">Charlie Cheever Follows “14 Rules for Faster-Loading Web Sites”</a></li>\n<li><a href=\"/quoras-technology-examined#conclusion\">Conclusion</a></li>\n<li><a href=\"/quoras-technology-examined#recommended-reading\">Recommended Reading</a></li>\n<li><a href=\"/quoras-technology-examined#resources\">Resources</a></li>\n</ul>\n<h2 id=\"components-of-quora\">Components Of Quora</h2>\n<p>The general components that make up Quora are…</p>\n<ul>\n<li>You can ask <strong>questions</strong></li>\n<li>You can <strong>answer</strong> questions (anonymously if you desire)</li>\n<li>You can <strong>comment</strong> on answered questions</li>\n<li>You can <strong>vote</strong>-up or vote-down answers to questions</li>\n<li>Questions can be assigned to <strong>topics</strong></li>\n<li>You can write a <strong>post</strong> (a informative statement, rather like a orphaned answer or blog post)</li>\n<li>You can <strong>follow</strong> questions, topics or other users</li>\n<li>A super-fast auto-complete <strong>search</strong>-box at the top, which doubles as the method for entering new questions</li>\n</ul>\n<p>The last point, the super-fast auto-complete search-box, is one of the defining features of Quora. You can see immediately, as you begin to enter a question, whether somebody else has already asked that question or if there is a topic or post on the subject. Let’s start there…</p>\n<h2 id=\"whats-cooking-under-that-hood\">What’s Cooking Under That Hood?</h2>\n<h3 id=\"the-search-box\">The Search-Box</h3>\n<p>Only the questions, topic labels, user names or post titles are indexed and served up to the search-box. There is no full-text search, so searching the content of questions and answers will not work. The text that is indexed is tokenized so that words in a different order will still be matched. Prefix matching enables best matches to be shown before the entire word is entered. For instance, typing “mi” might immediately show “Microsoft” in the results.</p>\n<p>There is some simple stemming of words, since “nears” matches “near”, but “pony” does not match “ponies”. “Topic-aliases” allow for similar matches on topic names, such as “startup” and “start-up”. These topic-aliases have been manually entered by users. Otherwise these would not match.</p>\n<p>If a duplicate question is redirected to another question (a feature of Quora), then that original question will still appear in the search results, since it increases the chances of a match. There is no <a href=\"https://www.lucidimagination.com/blog/2009/09/08/auto-suggest-from-popular-queries-using-edgengrams/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">n-gram</a> indexing, so slight mis-spellings will not match. For instance, “gooogle” (with an extra “o”) finds nothing.</p>\n<p>Previously, they did use an open source search server, called <a href=\"https://sphinxsearch.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Sphinx</a>. It supports the features they are using above, but they have since moved from this <a href=\"https://www.quora.com/What-is-the-best-open-source-solution-for-implementing-fast-auto-complete\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">due to real-time constraints</a>. Their new solution is built in-house and allows them better prefix indexing and control over the matching algorithms. They built this in Python.</p>\n<blockquote><p><a href=\"https://www.quora.com/What-libraries-does-Quora-use-for-search\"><img height=\"16\" src=\"https://www.quora.com/favicon.ico\" style=\"padding-right: 10px\" width=\"16\">What libraries does Quora use for search?</a><br>\n<small>Adam D&#x2019;Angelo, Quora Founder (Nov 13, 2010)</small><br>\nOur search is custom-written. It doesn&#x2019;t use any libraries aside from Thrift, and Python&#x2019;s unicode library, which we use for unicode normalization.\n</p></blockquote>\n<h4 id=\"speedy-queries\">Speedy Queries</h4>\n<p>Did I mention that the search-box is fast? I did some tests and found the responses to be impressive. Queries are sent over AJAX as a GET request. Responses come back as JSON with the rendered HTML embedded inside the JSON. Rendering of the results on the server-side, as opposed to rendering them in JavaScript, seems to be due to the need to highlight matching words in the text. This is sometimes too complex for JavaScript. For instance, typing “categories” might highlight the world “category” in the result text.</p>\n<p>I was seeing responses of roughly 50 milliseconds per query from my <a href=\"https://www.linode.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Linode</a> machine. Quora does not short-change you when sending requests. From within the browser, I found typing “Microsoft” (9 characters) would result in nine requests to the Quora search server, no matter how fast you type. As you will <a href=\"/quoras-technology-examined#long-polling-comet\">see later</a>, the server is in control, so if it did become over-loaded, then it could update the results less frequently without changing the JavaScript.</p>\n<p>Quora uses persistent connections. A HTTP connection is established with the server when you start typing the search query. This connection is kept open and further requests are made on this same open connection. The connection will terminate (times-out) if not used for 60 seconds. If a connection times-out then a new connection is established when typing begins.</p>\n<p>To simulate the typing of a word into the search-box, I sent the following requests, character-by-character, across a persistent connection. For instance “butler” is six requests (“b”, “bu”, “but” … “butler”).</p>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">&quot;butler&quot; (6 chars) duration: 0.393 secs 0.065 secs per query</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">&quot;butler monkeys&quot; (14 chars) duration: 0.672 secs 0.048 secs per query</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">&quot;fasdisajfosdffsa&quot; (16 chars) duration: 0.746 secs 0.046 secs per query</span></span></code></pre>\n<p>That last query was used to test if there was a slow-down for a word that would obviously not be in a caching layer. I saw no slow-down. This means that they are not caching, caching is only used to take the load off the backend search engine or they are doing something smarter (e.g. if there is no match for “fasd” then there will be no match for “fasdi”, so abort).</p>\n<blockquote><p><a href=\"https://www.quora.com/Quora-product/Is-Quora-going-to-implement-full-text-search\"><img height=\"16\" src=\"https://www.quora.com/favicon.ico\" style=\"padding-right: 10px\" width=\"16\">Is Quora going to implement full-text search?</a><br>\n<small>Adam D&#x2019;Angelo, I made a lot of the early Quora &#x2026; (Sep 1, 2010)</small><br>\nYes, eventually. We haven&#x2019;t implemented this yet because we&#x2019;ve prioritized other things, but we will definitely do it in the future.\n</p></blockquote>\n<h3 id=\"webnode2-and-livenode\">Webnode2 And LiveNode</h3>\n<p>Webnode2 and LiveNode are some of Quora’s internal systems, which were built for managing the content. Webnode2 generates HTML, CSS and JavaScript and is tightly coupled with LiveNode, which is responsible for managing the display of the content on the webpage. Charlie Cheever says that he were to start a similar project without LiveNode, then the <a href=\"https://www.quora.com/What-limitations-has-Quora-encountered-due-to-LiveNode-WebNode#answers\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">first thing he would do is rebuild it</a>.</p>\n<p>They seem very pleased with the technology they have built and <a href=\"https://www.quora.com/What-limitations-has-Quora-encountered-due-to-LiveNode-WebNode#answers\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">struggled to find its weaknesses</a>. One weakness is that it is tricky for LiveNode to keep track of what is happening within the browser as it pushes changes from the server. If users A and B are viewing the same question then ones interactions will affect the other. For instance, if user A up-votes an answer then that answer will be promoted and will visibly move up the page. This display change will be pushed over AJAX to user B’s browser. Any prior browser-side change that user B made, such as expanding a comments section, might be lost.</p>\n<p><a href=\"https://www.quora.com/What-is-LiveNode-written-in\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">LiveNode is written in</a> Python, C++, and JavaScript. <a href=\"https://jquery.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">jQuery</a> and <a href=\"https://cython.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Cython</a> is also used.</p>\n<p>While they <a href=\"https://www.quora.com/Is-Quora-planning-on-open-sourcing-LiveNode\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">would like to open-source LiveNode</a> and have tried to keep code separation, doing so right now would be too much work and would take time away from their main goal, which is making Quora better.</p>\n<p>Charlie Cheever points out that webnode2 is <a href=\"https://www.quora.com/Quora-Infrastructure/What-is-webnode2\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">unrelated to the “free and easy website builder” called Webnode at webnode.com</a>.</p>\n<h3 id=\"amazon-web-services\">Amazon Web Services</h3>\n<p>Amazon EC2 and S3 is used for their hosting. While this is not as cost-effective in the long-term as running your own servers, it is perfectly designed for fast growing companies like Quora.</p>\n<h4 id=\"ubuntu-linux\">Ubuntu Linux</h4>\n<p>Quora uses Ubuntu Linux as its OS of choice. No major surprises there. It is easy to deploy and manage on Amazon EC2. Adam D’Angelo <a href=\"https://www.quora.com/Quora-Infrastructure/Which-Linux-flavor-does-Quora-use-Why\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">points out</a> that he used Debian Linux at high school and college and stuck with it because <a href=\"https://www.quora.com/Quora-Infrastructure/Which-Linux-flavor-does-Quora-use-Why\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">“it works and there hasn’t been a compelling reason to switch”</a>.</p>\n<h4 id=\"static-content\">Static Content</h4>\n<p>You only need to look at the source HTML of any Quora webpage to see that they are using Amazon’s distributed content delivery network, <a href=\"https://aws.amazon.com/cloudfront/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Cloudfront</a>. URLs are in the form…</p>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">https://d2o7bfz2il9cb7.cloudfront.net/main-thumb-670336-25-7kmigSSkkdusoE6gHRkdQsXfjuTCaxQs.jpeg</span></span></code></pre>\n<p>CloudFront is used for all static images, CSS and JavaScript (except for Google’s Analytics JavaScript, which is hosted by Google). <a href=\"https://www.quora.com/How-is-Quora-doing-image-uploads-to-Amazon-S3\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Images are uploaded to the EC2 machine, then resized and uploaded to S3</a>. This is managed using the <a href=\"https://aws.amazon.com/code/134\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Python S3 API</a>.</p>\n<h3 id=\"haproxy-load-balancing\">HAProxy Load-Balancing</h3>\n<p>Quora uses <a href=\"https://haproxy.1wt.eu/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">HAProxy</a> at the front-line, which load-balances onto the distributed Nginx servers behind them.</p>\n<h3 id=\"nginx\">Nginx</h3>\n<p>Behind the load-balancer, <a href=\"https://nginx.org/en/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Nginx</a> is used as a reverse-proxy server onto the web-servers.</p>\n<p>To understand more about this setup I recommend reading “<a href=\"https://kovyrin.net/2006/05/18/nginx-as-reverse-proxy/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Using Nginx As Reverse-Proxy Server On High-Loaded Sites</a>“.</p>\n<h3 id=\"pylons-and-paste\">Pylons And Paste</h3>\n<p><a href=\"https://pylonshq.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Pylons</a>, a lightweight web framework, is used as their main web-server behind Nginx. They use the default <a href=\"https://spacepants.org/blog/pylons-paste-stack\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Pylon + Paste stack</a>.</p>\n<p><a href=\"https://pylonshq.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Pylons</a> was selected much like you would select a pumpkin for Haloween. They scooped out the insides, such as templates and the ORM, and replaced it with their own technology, written in Python. This is where <a href=\"https://www.quora.com/What-languages-and-frameworks-were-used-to-code-Quora\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">LiveNode and webnode2 reside</a>.</p>\n<p><a href=\"https://www.mochimedia.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">MochiMedia</a> was also one of the inspirations for using Pylons, since they were using it themselves.</p>\n<h3 id=\"python\">Python</h3>\n<p>Coming from Facebook, it was a good bet that Charlie and Adam would choose PHP for their development language. As Adam points out, “<a href=\"https://www.quora.com/Why-did-Quora-choose-Python-for-its-development\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Facebook is stuck on that for legacy reasons, not because it is the best choice right now</a>“. From this experience they knew that choosing technologies, especially programming languages, for the long-run was very important. They also looked at C#, Java, and Scala. <a href=\"https://www.quora.com/Why-did-Quora-choose-Python-for-its-development\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Discounting Mono</a>, C# would be a choice of more than just the language. It would require them to build on-top of a Microsoft stack. Python won over Java because it is more expressive and quicker to write code than Java. Scala was too new. Adam mentions <a href=\"https://www.quora.com/Why-did-Quora-choose-Python-for-its-development\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">speed and the lack of type-checking</a> as drawbacks with Python, but they both already knew the language reasonably well. Where Python lacks speed for performance critical backend components, they opt to write them in C++. They saw Ruby as a close match to Python, but their experience with Python and lack of experience in Ruby, made Python the winner. Python <em>2.6</em>, to be precise.</p>\n<p>Additional benefits for using Python are the fact that data-structures that map well to JSON, code readability, there is a large collection of libraries and the availability of good debuggers and reloaders. Browser-server communication using JSON is major component of what Quora does, so this was an important factor.</p>\n<p><a href=\"https://www.quora.com/Adam-DAngelo/What-version-of-Python-are-you-programming-in-and-what-IDE-do-you-use\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">No IDEs</a> are used for development as most use the <a href=\"https://www.gnu.org/software/emacs/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Emacs text editor</a>. Obviously this is personal choice, and would change as the team grows.</p>\n<p><a href=\"https://codespeak.net/pypy/dist/pypy/doc/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">PyPy</a>, a project that aims to produce a flexible and fast Python implementation, was also mentioned as something that might give them a speed-boost.</p>\n<h3 id=\"thrift\">Thrift</h3>\n<p><a href=\"https://incubator.apache.org/thrift/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Thrift</a> is used for communications between backend systems. The Thrift service is written in C++.</p>\n<blockquote><p><a href=\"https://www.quora.com/Why-would-you-write-a-Thrift-service-in-C\"><img height=\"16\" src=\"https://www.quora.com/favicon.ico\" style=\"padding-right: 10px\" width=\"16\">Why would you write a Thrift service in C++?</a><br>\n<small>Adam D&#x2019;Angelo, I&#x2019;ve written a lot of Python, in&#x2026; (Sep 4, 2010)</small><br>\nMainly if you want to keep data in memory between requests, and want to keep your Python code stateless. Writing a Python wrapper around a C library involves some memory management with reference counting that requires some understanding of the Python internals, but writing a thrift interface is simple. You also isolate failures this way &#x2013; if the service goes down it won&#x2019;t take the Python code down with it.\n</p></blockquote>\n<h3 id=\"tornado\">Tornado</h3>\n<p>The <a href=\"https://www.tornadoweb.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Tornado</a> web framework is used for live updating. This is their Comet server, which handles the large volumes of open connections used for long-polling and pushes updates to the browsers.</p>\n<h3 id=\"long-polling-comet\">Long Polling (Comet)</h3>\n<p>Quora does not display just static web pages. Each page will update will new content as questions, answers and comments are submitted by other others. As Adam D’Angelo points out, one of the best ways to do this currently is with “long polling”. This is different to “polling”. With <em>polling</em> the browser will repeatedly send requests to the server saying “Any updates?” and the server will respond with “No”. A few seconds later it will ask again, “How about now?”. “No”. “How about now?”, “No, already!”. This puts the client (web-browser) in the driver’s seat. This is backwards because the client does not how long to wait before asking again. If the client asks the server too frequently then it will unduly overload the server. If it pings the server too infrequently, then server will be sitting on updates while it waits for the client to request them and the end-user will not see updates immediately.</p>\n<p>Long polling, also known as <a href=\"https://en.wikipedia.org/wiki/Comet_(programming)\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Comet</a>, puts the server in control, by making the client wait for responses. The conversation between the client and server is the same, but instead of the client waiting before making another request, the server waits before it makes the response. The server can keep the connection open for a long period of time (e.g. 60 seconds) while it waits to see if any updates come in. When updates do come in it can respond immediately to the client. On receiving the update, the client then immediately sends a new request for more updates. The server, once again, delays responding until it knows something worth telling the client or enough time has past that it would be rude not to respond.</p>\n<p>The benefit to long-polling is that there is less back-and-forth between the client and server. The server is in control of the timing, so updates to the browser can be made within milliseconds. This makes it ideal for chat applications or applications that want really snappy updates for their users.</p>\n<p>The down-side is that you are going have lots of open connections between the clients and your servers. If you have a million users (Quora will soon) and, if only 10% of them are online on your site, you will need an architecture that can hold open at least 100,000 concurrent connections. This assumes they only have one tab open to your site. Right now I have 7 tabs open for quora.com in my browser. Each tab usually has multiple connections open to quora.com. In short, Quora must maintain <em>a lot</em> of open connections.</p>\n<p>The good news is that there are technologies specifically designed for this. It costs very little to hold open connections in memory if you free up all the resources used for that connection. For instance, Nginx (Quora uses this for proxying requests) is a single-threaded event-based application and uses very little memory for each connection. Each Nginx process is actively dealing with only one connection at a time. This means it can scale to tens of thousands of concurrent connections.</p>\n<blockquote><p><a href=\"https://www.quora.com/How-do-you-push-messages-back-to-a-web-browser-client-through-AJAX-Is-there-any-way-to-do-this-without-having-the-client-constantly-polling-the-server-for-updates\"><img height=\"16\" src=\"https://www.quora.com/favicon.ico\" style=\"padding-right: 10px\" width=\"16\">How do you push messages back to a web-browser client through AJAX?  Is there any way to do this without having the client constantly polling the server for updates?</a><br>\n<small>Adam D&#x2019;Angelo, Quora (Sep 29, 2010)</small><br>\nThere is no reliable way to do this without having the client polling the server. However, you can make the server stall its responses (50 seconds is a safe bet) and then complete them when a message is ready for the client. This is called &#x201C;long polling&#x201D; and it&#x2019;s how Quora, Gmail, Meebo, etc all handle the problem.</p><p>If you have a specialized server that uses epoll or kqueue, you should be able to hold on the order of 100k users per server (depending on how many messages are going). This is called the &#x201C;c10k&#x201D; problem. https://www.kegel.com/c10k.html\n</p></blockquote>\n<h3 id=\"mysql\">MySQL</h3>\n<p>Just like Facebook, where co-founder Adam D’Angelo previously worked, Quora heavily uses MySQL. In answer to the Quora question “<a href=\"https://www.quora.com/When-Adam-DAngelo-says-partition-your-data-at-the-application-level-what-exactly-does-he-mean\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">When Adam D’Angelo says “partition your data at the application level”, what exactly does he mean?</a>“, D’Angelo goes into the details of how to use MySQL (or relational-databases generally) as a distributed data-store.</p>\n<p>The basic advice is to only partition data if necessary, keep data on one machine if possible and use a hash of the primary key to partition larger datasets across multiple databases. Joins must be avoided. He sites FriendFeed’s architecture as a good example of this. FriendFeed’s architecture is described by Bret Taylor in his post “<a href=\"https://bret.appspot.com/entry/how-friendfeed-uses-mysql\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">How FriendFeed uses MySQL to store schema-less data</a>“. D’Angelo also <a href=\"https://www.quora.com/NoSQL/In-what-parts-of-a-social-site-with-concert-listings-should-one-use-a-NoSQL-DB-versus-a-SQL-DB\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">states</a> that you should not use a NoSQL database for a social site until you have millions of users.</p>\n<p>It is not only Quora and FriendFeed who are heavily using MySQL. Ever heard of “Google”? It is hard to imagine, since everything Google does has to scale so well, but in <a href=\"https://googlecode.blogspot.com/2007/04/google-releases-patches-that-enhance.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">the words of Google</a>, “Google uses MySQL […] in some of the applications that we build that are not search related”. Google has released <a href=\"https://code.google.com/p/google-mysql-tools/wiki/Mysql4Patches\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">patches</a> for MySQL related to replication, syncing, monitoring and faster master promotion.</p>\n<blockquote><p><a href=\"https://www.quora.com/How-does-one-evaluate-if-a-database-is-efficient-enough-to-not-crash-as-its-put-under-increasing-load\"><img height=\"16\" src=\"https://www.quora.com/favicon.ico\" style=\"padding-right: 10px\" width=\"16\">How does one evaluate if a database is efficient enough to not crash as it&#x2019;s put under increasing load?</a><br>\n<small>Adam D&#x2019;Angelo, Quora (Oct 10, 2010)</small><br>\nOne option is to simulate some load. Write a script that mimics the kinds of queries your application will be doing, and make sure it can handle the amount of load you want it to be ready for (especially as the size of the dataset changes).\n</p></blockquote>\n<h3 id=\"memcached\">Memcached</h3>\n<p><a href=\"https://memcached.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Memcached</a> is used as a caching layer in front of MySQL.</p>\n<h3 id=\"git\">Git</h3>\n<p><a href=\"https://git-scm.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Git</a> is <a href=\"https://www.quora.com/What-languages-and-frameworks-were-used-to-code-Quora\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">used for version control</a>.</p>\n<h3 id=\"javascript-placement\">JavaScript Placement</h3>\n<p>If you look at Quora’s source you will see that the JavaScript comes at the end of the page. Charlie Cheever <a href=\"https://www.quora.com/Why-is-the-Quora-website-so-fast\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">suggests</a> that this give the feeling of a quicker loading page, since the browser has content to display before the JavaScript has be seen.</p>\n<h2 id=\"charlie-cheever-follows-14-rules-for-faster-loading-web-sites\">Charlie Cheever Follows “14 Rules for Faster-Loading Web Sites”</h2>\n<p>Steve Souders, author of High Performance Web Sites and Even Faster Web Sites, lists the following <a href=\"https://stevesouders.com/hpws/rules.php\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">rules for making websites faster</a>. This list is mentioned by Charlie Cheever, the co-founder of Quora, as one of the reasons for Quora’s speed.</p>\n<blockquote>\n<p>\n“One resource we used as a guide is Steve Souders’ list of rules for high performance websites: <a href=\"https://stevesouders.com/hpws/rules.php\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://stevesouders.com/hpws/rules.php</a>”<br>\n<small><a href=\"https://www.quora.com/Why-is-the-Quora-website-so-fast\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"> – Charlie Cheever, Quora</a></small></p>\n</blockquote>\n<p>Steve Souders’ 14 rules are…</p>\n<ul>\n<li>Make Fewer HTTP Requests</li>\n<li>Use a Content Delivery Network</li>\n<li>Add an Expires Header</li>\n<li>Gzip Components</li>\n<li>Put Stylesheets at the Top</li>\n<li>Put Scripts at the Bottom</li>\n<li>Avoid CSS Expressions</li>\n<li>Make JavaScript and CSS External</li>\n<li>Reduce DNS Lookups</li>\n<li>Minify JavaScript</li>\n<li>Avoid Redirects</li>\n<li>Remove Duplicate Scripts</li>\n<li>Configure ETags</li>\n<li>Make AJAX Cacheable</li>\n</ul>\n<h2 id=\"conclusion\">Conclusion</h2>\n<p>Quora is a great example of a modern tech start-up. They are very small team who understand the technologies they are using very well. They have made considered choices in the technology they have selected and have a good vision of which components would be better written from scratch. They seem keen to share these in-house technologies with the open-source community and I look forward to when they have the time to make this a reality.</p>\n<p>I intend to keep following Quora and writing about them <a href=\"/feed\"><strong>more in future blog posts</strong></a>.</p>\n<p>If you found this post useful then please <a href=\"/quoras-technology-examined#comments-template\"><strong>leave a comment</strong></a> or <a href=\"/feed\"><strong>follow this blog</strong></a>.</p>\n<h2 id=\"resources\">Resources</h2>\n<ul style=\"padding-bottom: 40px;\">\n<li><a href=\"https://www.quora.com\">Quora.com</a></li>\n<li><a href=\"https://bret.appspot.com/entry/how-friendfeed-uses-mysql\">How FriendFeed uses MySQL to store schema-less data</a></li>\n<li><a href=\"https://stevesouders.com/hpws/rules.php\">Steve Souders’ 14 Rules for Faster-Loading Web Sites</a></li>\n</ul>\n<h2 id=\"comments\" style=\"position:relative;\"><a href=\"#comments\" aria-label=\"comments permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Comments</h2>\n<div id=\"comments\">\n  <ol class=\"comment-list\">\n    <li id=\"comment-909\" class=\"comment even thread-even depth-1 comment reader\">\n      <img alt=\"Ellie Kesselman\" src=\"https://0.gravatar.com/avatar/8cce7b70d30f42045bc6c8569f5549e2?s=80&amp;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\" title=\"https://myindigolives.wordpress.com/\">Ellie Kesselman</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Monday, January 31st, 2011, 7:58 pm\">January 31, 2011</abbr> at <abbr class=\"comment-time\" title=\"Monday, January 31st, 2011, 7:58 pm\">7:58 pm</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>Very interesting! I knew that Quora was SQL, much to the disdain and surprise of the NoSQL types. </p>\n        <p>However, as a user, I&#x2019;d noticed that Quora&#x2019;s platform seemed to be able to withstand as much abuse as I could throw at it through my undisciplined work and browsing habits. High reliability, fast, not a Chrome browser resource hog, real-time updating of information without locking out users, yet no getting hung. I&#x2019;ve never timed out on Quora, either. </p>\n        <p>Of course (unless one is Robert Scoble, snark snark), there aren&#x2019;t many image files to contend with, nor multi-media, which are resource hogs. </p>\n        <p>Thank you so much for this post, and for satisfying some of my curiosity. (I need to go back and re-read it carefully, there&#x2019;s a lot of content here).</p>\n        <p>I look forward to more!</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-927\" class=\"comment odd alt thread-odd thread-alt depth-1 comment reader\">\n      <img alt=\"Amul\" src=\"https://0.gravatar.com/avatar/82a63fd031d493eeee659050536747fe?s=80&amp;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\" title=\"https://Connecttheory.com\">Amul</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Wednesday, February 2nd, 2011, 8:32 am\">February 2, 2011</abbr> at <abbr class=\"comment-time\" title=\"Wednesday, February 2nd, 2011, 8:32 am\">8:32 am</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>Really impressive breakdown of their stack.. I thought it was php driven considering the Facebook legacy. I hope they open source their search..</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-937\" class=\"comment even thread-even depth-1 comment reader\">\n      <img alt=\"Alex Toulemonde\" src=\"https://0.gravatar.com/avatar/6b02975aaf1cab1a97d696fa5b822c88?s=80&amp;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\" title=\"https://blog.alextoul.fr\">Alex Toulemonde</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Wednesday, February 2nd, 2011, 10:27 pm\">February 2, 2011</abbr> at <abbr class=\"comment-time\" title=\"Wednesday, February 2nd, 2011, 10:27 pm\">10:27 pm</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>Thanks Phil for this comment. I finally went back to it and break it down. This is brilliant and inspiring.</p>\n        <p>I believe we&#x2019;re missing something crucial: stats. Scaling up is getting easier but setting up this kind of architecture requires a lot of learning and time. So the question for us, entrepreneurs, would be WHEN since you answered to the HOW.</p>\n        <p>At how many HTTP or SQL requests per day should we start caring about details. Except the fact that NoSQL does not appear necessary before 1M users, what other milestones should we watch out to know when IT&#x2019;S TIME.</p>\n        <p>See U soon.</p>\n      </div>\n      <!-- .comment-text -->\n      <ol class=\"children\">\n        <li id=\"comment-993\" class=\"comment byuser comment-author-admin bypostauthor odd alt depth-2 comment role-administrator user-admin entry-author\">\n          <img alt=\"Phil Whelan\" src=\"https://1.gravatar.com/avatar/5f357d996da96ccd36d3374e3728bf29?s=80&amp;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n          <div class=\"comment-meta comment-meta-data\">\n            <div class=\"comment-author vcard\">\n              <cite class=\"fn\" title=\"https://www.google.com/profiles/101358683928607234715\">Phil Whelan</cite>\n            </div>\n            <!-- .comment-author .vcard -->\n            <abbr class=\"comment-date\" title=\"Monday, February 7th, 2011, 11:06 am\">February 7, 2011</abbr> at <abbr class=\"comment-time\" title=\"Monday, February 7th, 2011, 11:06 am\">11:06 am</abbr>\n          </div>\n          <div class=\"comment-text\">\n            <p>Good point, Alex. The WHEN will have to wait for another post. Stay tuned.</p>\n            <p>It&#x2019;s important to understand that the co-founders at Quora understand the technologies they are using very well. They planned for scaling and performance before they built their tools and architecture. They understand MySQL very well and how they can use it as the basis for a scalable data-store. They seem to also know when the limitations of this architecture will be reached and I have no doubts that they have plans in place for migrating the architecture, where necessary, to different technologies. That said, they will likely encounter some unique challenges in scaling that others have not encountered before. This is due to the unique way that they have created Quora. Friendfeed is the closest website structure I can think of off the top of my head, but I expect Quora to take the scaling to a whole new level. LiveNode and webnode2 show that they are not affraid of building their own solution where one does not exist. The question might not be WHEN to move to a NoSQL solution (if that is your question), but WHEN to build your own NoSQL solution that uniquely addresses your scaling challenges.</p>\n          </div>\n          <!-- .comment-text -->\n        </li>\n        <!-- .comment -->\n      </ol>\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-948\" class=\"comment even thread-odd thread-alt depth-1 comment reader\">\n      <img alt=\"Jonathan\" src=\"https://0.gravatar.com/avatar/4e2d7b273364ba955f1f05d43c6c2837?s=80&amp;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\">Jonathan</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Thursday, February 3rd, 2011, 8:50 am\">February 3, 2011</abbr> at <abbr class=\"comment-time\" title=\"Thursday, February 3rd, 2011, 8:50 am\">8:50 am</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>i have to think this would be incredibly helpful to anybody committing to a web-based project in the future. thanks a bunch!</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-949\" class=\"comment odd alt thread-even depth-1 comment reader\">\n      <img alt=\"J&#xFC;rgen Messing\" src=\"https://0.gravatar.com/avatar/0e0d4c66487e35f33a609d9e1d5b7687?s=80&amp;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\" title=\"https://www.lindenbook.com\">J&#xFC;rgen Messing</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Thursday, February 3rd, 2011, 9:59 am\">February 3, 2011</abbr> at <abbr class=\"comment-time\" title=\"Thursday, February 3rd, 2011, 9:59 am\">9:59 am</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>I must smile a little about the surprised reactions on the scale-at-the-application thing. This is so commonly used in the industry long before shared caches came around. In Telecoms billing software for example,  especially software that makes the weird real-time calculation for prepaid subscribers, you often can see them scale the load by the subscribers&#x2019; MSISDN. This does not actually distribute the load perfectly balanced, but it&#x2019;s simple to implement. Each node could have its own database locally, even MySQL. Batch processes running during the less active hours of the service redistribute subscriber data if needed.</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-960\" class=\"comment even thread-odd thread-alt depth-1 comment reader\">\n      <img alt=\"Jon Forrest\" src=\"https://1.gravatar.com/avatar/bcfad26ae203b98b090b6e16bbcbad82?s=80&amp;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\">Jon Forrest</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Friday, February 4th, 2011, 10:28 am\">February 4, 2011</abbr> at <abbr class=\"comment-time\" title=\"Friday, February 4th, 2011, 10:28 am\">10:28 am</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>Very interesting. This is how the big boys/girls do it.</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-973\" class=\"comment byuser comment-author-tarnowski-krzysztof odd alt thread-even depth-1 comment role-subscriber user-tarnowski-krzysztof\">\n      <img alt=\"tarnowski.krzysztof\" src=\"https://1.gravatar.com/avatar/75eea8771b0d38284f0a4197f950841e?s=80&amp;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\" title=\"https://www.google.com/profiles/116210946101186565496\">tarnowski.krzysztof</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Saturday, February 5th, 2011, 7:43 am\">February 5, 2011</abbr> at <abbr class=\"comment-time\" title=\"Saturday, February 5th, 2011, 7:43 am\">7:43 am</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>Excellent post. Thanks Phil!</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-985\" class=\"comment even thread-odd thread-alt depth-1 comment reader\">\n      <img alt=\"Horia Dragomir\" src=\"https://0.gravatar.com/avatar/eb2fd4fc5dd468c43ae4506769428c22?s=80&amp;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\" title=\"https://horia.me\">Horia Dragomir</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Sunday, February 6th, 2011, 2:24 pm\">February 6, 2011</abbr> at <abbr class=\"comment-time\" title=\"Sunday, February 6th, 2011, 2:24 pm\">2:24 pm</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>I must admit I too stopped to ponder why Quora was not using a nosql database &#x2014; but then I thought &#x201C;Hey, whatever flies your kite.&#x201D;</p>\n        <p>Also, thank you for the further reading suggestions!</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-988\" class=\"comment odd alt thread-even depth-1 comment reader\">\n      <img alt=\"Sabya\" src=\"https://1.gravatar.com/avatar/1c83ee7e18ff08fc6aa39323e39c77b1?s=80&amp;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\" title=\"https://itsrw.com\">Sabya</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Monday, February 7th, 2011, 2:34 am\">February 7, 2011</abbr> at <abbr class=\"comment-time\" title=\"Monday, February 7th, 2011, 2:34 am\">2:34 am</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <blockquote>\n          <p>Quora uses persistent connections. A HTTP connection is established with the server when you start typing the search query. This connection is kept open and further requests are made on this same open connection. The connection will terminate (times-out) if not used for 60 seconds. If a connection times-out then a new connection is established when typing begins.\n</p>\n        </blockquote>\n        <p>By &#x201C;persistent connections&#x201D;, do you mean HTTP keep-alive (https://en.wikipedia.org/wiki/Keepalive)?</p>\n      </div>\n      <!-- .comment-text -->\n      <ol class=\"children\">\n        <li id=\"comment-992\" class=\"comment byuser comment-author-admin bypostauthor even depth-2 comment role-administrator user-admin entry-author\">\n          <img alt=\"Phil Whelan\" src=\"https://1.gravatar.com/avatar/5f357d996da96ccd36d3374e3728bf29?s=80&amp;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n          <div class=\"comment-meta comment-meta-data\">\n            <div class=\"comment-author vcard\">\n              <cite class=\"fn\" title=\"https://www.google.com/profiles/101358683928607234715\">Phil Whelan</cite>\n            </div>\n            <!-- .comment-author .vcard -->\n            <abbr class=\"comment-date\" title=\"Monday, February 7th, 2011, 10:48 am\">February 7, 2011</abbr> at <abbr class=\"comment-time\" title=\"Monday, February 7th, 2011, 10:48 am\">10:48 am</abbr>\n          </div>\n          <div class=\"comment-text\">\n            <p>Yes, that&#x2019;s right. The web-browser keeps the connection with the server alive using HTTP keep-alive.</p>\n          </div>\n          <!-- .comment-text -->\n        </li>\n        <!-- .comment -->\n      </ol>\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-1007\" class=\"comment odd alt thread-odd thread-alt depth-1 comment reader\">\n      <img alt=\"magicshui\" src=\"https://0.gravatar.com/avatar/61848af6a10034cf09426b843e01efc3?s=80&amp;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\" title=\"https://shui.us\">magicshui</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Wednesday, February 9th, 2011, 3:39 am\">February 9, 2011</abbr> at <abbr class=\"comment-time\" title=\"Wednesday, February 9th, 2011, 3:39 am\">3:39 am</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>Thanks for your post, especially the long polling,useful for me~</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-1032\" class=\"comment byuser comment-author-niteshthakur even thread-even depth-1 comment role-subscriber user-niteshthakur\">\n      <img alt=\"Nitesh Thakur\" src=\"https://1.gravatar.com/avatar/d41bd6decc724d1f10377640252d93f9?s=80&amp;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\" title=\"https://www.facebook.com/profile.php?id=765989737\">Nitesh Thakur</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Thursday, February 10th, 2011, 3:57 am\">February 10, 2011</abbr> at <abbr class=\"comment-time\" title=\"Thursday, February 10th, 2011, 3:57 am\">3:57 am</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>nice</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-1040\" class=\"comment odd alt thread-odd thread-alt depth-1 comment reader\">\n      <img alt=\"Richard Weisberger\" src=\"https://0.gravatar.com/avatar/47a606f089e687a92558bfbb49f727ef?s=80&amp;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\">Richard Weisberger</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Thursday, February 10th, 2011, 1:53 pm\">February 10, 2011</abbr> at <abbr class=\"comment-time\" title=\"Thursday, February 10th, 2011, 1:53 pm\">1:53 pm</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>Great Piece. </p>\n        <p>Do you have a sense for how many man hours this would take to build?</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-1443\" class=\"comment even thread-even depth-1 comment reader\">\n      <img alt=\"XU Qiang\" src=\"https://1.gravatar.com/avatar/70e2c152a34c9a1ed77076fa1bf12341?s=80&amp;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\">XU Qiang</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Wednesday, March 9th, 2011, 7:51 am\">March 9, 2011</abbr> at <abbr class=\"comment-time\" title=\"Wednesday, March 9th, 2011, 7:51 am\">7:51 am</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>very nice post. it is really helpful. thanks a lot!</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-1691\" class=\"comment even thread-even depth-1 comment reader\">\n      <img alt=\"taolinke\" src=\"https://1.gravatar.com/avatar/17526bd14b0c414d0528e592a1982081?s=80&amp;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\" title=\"https://blog.csdn.net/taolinke\">taolinke</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Thursday, March 24th, 2011, 10:34 pm\">March 24, 2011</abbr> at <abbr class=\"comment-time\" title=\"Thursday, March 24th, 2011, 10:34 pm\">10:34 pm</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>Thank you so much for this post and it&#x2019;s very impressive.<br>\nIt let me know a lot.<br>\nJust like you said,&#x201D;Quora is a great example of a modern tech start-up.&#x201D;</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-2836\" class=\"comment odd alt thread-odd thread-alt depth-1 comment reader\">\n      <img alt=\"Ramesh\" src=\"https://1.gravatar.com/avatar/978281c699050200f917d81a2ff6ca87?s=80&amp;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\">Ramesh</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Friday, May 13th, 2011, 8:43 am\">May 13, 2011</abbr> at <abbr class=\"comment-time\" title=\"Friday, May 13th, 2011, 8:43 am\">8:43 am</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>It is a great post and very insightful. Thank you.</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-28281\" class=\"comment even thread-even depth-1 comment reader\">\n      <img alt=\"Tommy\" src=\"https://0.gravatar.com/avatar/8c8f227adb759f3eb632bcfe77131b8e?s=80&amp;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\" title=\"https://www.tommychheng.com\">Tommy</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Friday, December 7th, 2012, 10:40 am\">December 7, 2012</abbr> at <abbr class=\"comment-time\" title=\"Friday, December 7th, 2012, 10:40 am\">10:40 am</abbr></div>\n      <div class=\"comment-text\">\n        <p>Quora is also using Scala for backend services:<br>\nhttps://www.quora.com/Quora-Infrastructure/Is-the-Quora-team-considering-adopting-Scala-Why</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-266800\" class=\"comment odd alt thread-odd thread-alt depth-1 comment reader\">\n      <img alt=\"krishnas\" src=\"https://0.gravatar.com/avatar/e5958a1cbe9eae42366b9e74374555bd?s=80&amp;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\">krishnas</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Monday, April 14th, 2014, 12:48 am\">April 14, 2014</abbr> at <abbr class=\"comment-time\" title=\"Monday, April 14th, 2014, 12:48 am\">12:48 am</abbr></div>\n      <div class=\"comment-text\">\n        <p>Great article.  One question I got is why HAProxy is used instead of AWS autoscalaing. Any thoughts?</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n  </ol>\n  <!-- .comment-list -->\n</div>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .monokai {\n    background-color: #272822;\n    color: #f8f8f2;\n  }\n  .monokai .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","fields":{"slug":"/quoras-technology-examined","tagSlugs":["/tag/adam-dangelo/","/tag/amazon-ec-2/","/tag/aws/","/tag/charlie-cheever/","/tag/comet/","/tag/git/","/tag/haproxy/","/tag/livenode/","/tag/long-polling/","/tag/memcached/","/tag/mysql/","/tag/nginx/","/tag/nosql/","/tag/paste/","/tag/pylons/","/tag/quora/","/tag/quora-com/","/tag/search-box/","/tag/steve-souders/","/tag/technology/","/tag/thrift/","/tag/tornado/","/tag/ubuntu-linux/","/tag/webnode-2/","/tag/webscale/"]},"frontmatter":{"date":"2011-01-31T12:37:00-08:00","description":"In this blog post I will delve into the snippets of information available on Quora and look at Quora from a technical perspective. What technical decisions have they made? What does their architecture look like? What languages and frameworks do they use? How do they make that search bar respond so quickly?","tags":["adam d'angelo","amazon ec2","aws","charlie cheever","comet","git","haproxy","livenode","long-polling","memcached","mysql","nginx","nosql","paste","pylons","quora","quora.com","search-box","steve souders","technology","thrift","tornado","ubuntu linux","webnode2","webscale"],"title":"Quora’s Technology Examined","socialImage":{"publicURL":{"publicURL":"/static/30f23d066a6f3dc6c6db26f423e2f92a/quora_microscope_sq.jpg"}}}}},"pageContext":{"slug":"/quoras-technology-examined"}},"staticQueryHashes":["251939775","3942705351","401334301"]}