{"componentChunkName":"component---src-templates-post-template-js","path":"/run-the-latest-whirr-and-deploy-hbase-in-minutes","result":{"data":{"markdownRemark":{"id":"19bf8599-b714-5db5-8d79-eb5705801385","html":"<p><a href=\"https://www.flickr.com/photos/wheatfields/3938695154/\" title=\"Fast, faster, faster! by net_efekt, on Flickr\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 320px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAABAD/xAAWAQEBAQAAAAAAAAAAAAAAAAACAwT/2gAMAwEAAhADEAAAAUQHUZplnf8A/8QAGRAAAwEBAQAAAAAAAAAAAAAAAQIDABEE/9oACAEBAAEFAg021pJSbeaWCLgvAWHP/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAR/9oACAEDAQE/ARV//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAIh/9oACAECAQE/Aalr/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAERITJh/9oACAEBAAY/AuvDJRaRUjbFiP/EABwQAQADAAIDAAAAAAAAAAAAAAEAITFBYRFRwf/aAAgBAQABPyE5y6qlgAJDacwPBXcV9EXzE5uTpp6n/9oADAMBAAIAAwAAABCf7//EABgRAAMBAQAAAAAAAAAAAAAAAAABETFh/9oACAEDAQE/EILaLp//xAAYEQADAQEAAAAAAAAAAAAAAAAAAREhMf/aAAgBAgEBPxCDzo1Z/8QAHRABAAICAgMAAAAAAAAAAAAAARExAHEhQVFhgf/aAAgBAQABPxBLoA/MOnZvGYYeDRL3i4kozNntwUSK1XJEdBIcPFYCCa/tLn//2Q==&apos;); background-size: cover; display: block;\"></span>\n  <picture>\n        <source srcset=\"/static/53c6df61dcff3bba4303575b89d47a94/8ac56/whirr_hbase.webp 240w,\n/static/53c6df61dcff3bba4303575b89d47a94/4c812/whirr_hbase.webp 320w\" sizes=\"(max-width: 320px) 100vw, 320px\" type=\"image/webp\">\n        <source srcset=\"/static/53c6df61dcff3bba4303575b89d47a94/09b79/whirr_hbase.jpg 240w,\n/static/53c6df61dcff3bba4303575b89d47a94/cb69c/whirr_hbase.jpg 320w\" sizes=\"(max-width: 320px) 100vw, 320px\" type=\"image/jpeg\">\n        <img class=\"gatsby-resp-image-image\" src=\"/static/53c6df61dcff3bba4303575b89d47a94/cb69c/whirr_hbase.jpg\" alt=\"Fast, faster, faster!\" title=\"Fast, faster, faster!\" loading=\"lazy\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n      </picture>\n    </span></a></p>\n<div style=\"min-height: 240px\">\nIn a few of my recent posts I have covered the ease of deploying clusters of <a href=\"/map-reduce-with-ruby-using-hadoop\">Hadoop</a> and <a href=\"/quickly-launch-a-cassandra-cluster-on-amazon-ec2\">Cassandra using Whirr</a>. With Whirr you can simply write a configuration file specifying which cloud provider you are using, your credentials and the definition of the cluster you desire and it will build it for you. In this post, I am going to look at the latest Whirr, version 0.3.0, which is currently in <em>release candidate</em> status. I will show you how you can find and build the latest Whirr and live on the edge of what it possible.\n</div>\n<ul style=\"padding-bottom: 30px\">\n<li><a href=\"#grabbing-the-source-code\">Grabbing The Source Code</a></li>\n<li><a href=\"#make-sure-you-have-those-dependencies\">Make Sure You Have Those Dependencies</a></li>\n<li><a href=\"#building-whirr\">Building Whirr</a></li>\n<li><a href=\"#launch-a-hbase-cluster&gt;Launch A HBase Cluster&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\">Destroy!</a></li>\n<li><a href=\"#conclusion\">Conclusion</a></li>\n</ul>\n<p><a id=\"grabbing-the-source-code\"></a></p>\n<h2 id=\"grabbing-the-source-code\" style=\"position:relative;\"><a href=\"#grabbing-the-source-code\" aria-label=\"grabbing the source code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Grabbing The Source Code</h2>\n<p>On <a href=\"https://svn.apache.org/repos/asf/incubator/whirr/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">the source repository for Whirr</a>, we can find the latest and greatest source code for Whirr. </p>\n<p><a href=\"https://twitter.com/andreisavu/status/28815577430622208\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 367px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA6ElEQVQI1yWNy0oDMRiF53H6JMWlTyEIPoIPILgQBnTj2pVL6a7gRpxLxqZVOhfTDnYuyZ/Mn2xMOxVaMYzf4nD4Fud4t/61f3P1Vcw5F3merRlbl+V+//N7PB4cQ/5Xh5MDh912a7+td3YyOh+PJg9+uWmCmEQxSWa0bpoOUUgpARARpNLaGK2blgMIANn3vbXWu78YTy9Pp493XCJ5o9nnKs2LhMQfy5TSWRiGyzRLEhJEEZ3Tl9eAELJYvBeMAYBHnp9YMOHVym3XdS2VctYddh1KEFwIY4wQom1b1BoGEPWmqpTq/gCcUcwMzWAi5AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/bcdd84e4a75b08f7ea2704191ee0b338/8ac56/twitter_post.webp 240w,\n/static/bcdd84e4a75b08f7ea2704191ee0b338/ddb01/twitter_post.webp 367w\"\n          sizes=\"(max-width: 367px) 100vw, 367px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/bcdd84e4a75b08f7ea2704191ee0b338/8ff5a/twitter_post.png 240w,\n/static/bcdd84e4a75b08f7ea2704191ee0b338/46684/twitter_post.png 367w\"\n          sizes=\"(max-width: 367px) 100vw, 367px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/bcdd84e4a75b08f7ea2704191ee0b338/46684/twitter_post.png\"\n          alt=\"twitter post\"\n          title=\"twitter post\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n    </span></a></p>\n<p>We will use the code from <a href=\"https://svn.apache.org/repos/asf/incubator/whirr/trunk\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">trunk</a>, which will give you the very latest version of the software.</p>\n<p>Even though version 0.2.0 is currently the most recent stable version we can download on <a href=\"https://incubator.apache.org/whirr/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">the official Whirr site</a>, 0.3.0 is available here under the tagged releases and hence the trunk. So let’s download the source for that. Version 0.3.0 will soon be made the official release, but by following this step-by-step guide, you will be ahead of the pack.</p>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">cd ~/src</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">svn co </span></span></code></pre>\n<p><a id=\"make-sure-you-have-those-dependencies\"></a></p>\n<h2 id=\"make-sure-you-have-those-dependencies\" style=\"position:relative;\"><a href=\"#make-sure-you-have-those-dependencies\" aria-label=\"make sure you have those dependencies permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Make Sure You Have Those Dependencies</h2>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">cat BUILD.txt</span></span></code></pre>\n<p>Looking at the dependencies in <a href=\"https://svn.apache.org/repos/asf/incubator/whirr/trunk/BUILD.txt\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">BUILD.txt</a>, you can see there is a few things we need. </p>\n<blockquote style=\"background: #eeeeee; padding: 15px; margin: 15px;\"><p>Apache Whirr Build Instructions</p>\n<p>REQUIREMENTS</p>\n<p>- Java 1.6<br/>\n- Apache Maven 2.2.1 or greater<br/>\n- Ruby 1.8.7 or greater (to run build-tools/update-versions)</p>\n<p>BUILDING</p>\n<p>To run unit tests and install artifacts locally:</p>\n<p>mvn clean install</p>\n<p>To build a source package:</p>\n<p>mvn package -Ppackage\n</p></blockquote>\n<p>If you have followed through one of my <a href=\"/quickly-launch-a-cassandra-cluster-on-amazon-ec2\">previous</a> <a href=\"/map-reduce-with-ruby-using-hadoop\">posts</a>, then you will likely have these dependencies all installed, but I will review them just encase.</p>\n<p>Being on Mac OS X, I generally use <a href=\"/homebrew-intro-to-the-mac-os-x-package-installer\">Homebrew</a> so install my dependencies. This will install Maven on Mac OS X if you have <a href=\"/homebrew-intro-to-the-mac-os-x-package-installer\">Homebrew installed</a>.</p>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">sudo brew install maven</span></span></code></pre>\n<p>If you are on Debian Linux (eg. Ubuntu) use apt-get to install Maven.</p>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">sudo apt-get install maven2</span></span></code></pre>\n<p>There are also instructions available for installing <a href=\"https://maven.apache.org/download.html#Windows_2000XP\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Maven on Windows</a> or <a href=\"https://maven.apache.org/download.html#Installation\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">other platform</a>.</p>\n<p>If you are using the latest Mac OS X then you should have Ruby 1.8.7 and Java 1.6 installed. If you have to upgrade your Ruby, then I recommend checking out <a href=\"https://rvm.beginrescueend.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ruby Version Manager (RVM)</a>.</p>\n<p>Here’s how to check your versions and what I’m currently running…</p>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"># Ruby</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">ruby -v</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">ruby 1.9.2p94 (2010-12-08 revision 30140) [x86_64-darwin10.5.0]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"># Java</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">java -version</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">java version &quot;1.6.0_22&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Java(TM) SE Runtime Environment (build 1.6.0_22-b04-307-10M3261)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Java HotSpot(TM) 64-Bit Server VM (build 17.1-b03-307, mixed mode)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"># Maven</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">mvn -v</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Apache Maven 2.2.1 (r801777; 2009-08-06 12:16:01-0700)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Java version: 1.6.0_22</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Java home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Default locale: en_US, platform encoding: MacRoman</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">OS name: &quot;mac os x&quot; version: &quot;10.6.6&quot; arch: &quot;x86_64&quot; Family: &quot;mac&quot;</span></span></code></pre>\n<p><a href=\"https://twitter.com/tom_e_white/status/27233840057548800\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 366px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+klEQVQY01WOPU/DMBCG85P5CYiZiZEBIbF0QjDyA5BaqeoAIcRu8207ib+SNE5iuyngFhYenXTvcPfceZxW/mb5uLjfbQHBmDGWJgmA0Fr77fj6w0Wjdds0qu/3XSeEmOfZi2Hw8vRwfXmxXr0GwWcYhgCEAG5LyklFSc2okJhgynhR1nFeZAVGmCCETstvm+Xz4vbu5ioM3pMsi+LYCTAmjHFSls4CAfT9j6xAuzSvuezVoIZhHEf3mte2spGirrBrOSZuIkpzdwGVNSJVlBYZwm2311qP02StOVjrymGM8c7hMB+PSikppZCSc0Ypc/ZJnzBnfoP+zw+qTw90K0TwHQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/4ebbc37b342f624d0870af100c8a6f64/8ac56/twitter_post2.webp 240w,\n/static/4ebbc37b342f624d0870af100c8a6f64/4146f/twitter_post2.webp 366w\"\n          sizes=\"(max-width: 366px) 100vw, 366px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/4ebbc37b342f624d0870af100c8a6f64/8ff5a/twitter_post2.png 240w,\n/static/4ebbc37b342f624d0870af100c8a6f64/8b153/twitter_post2.png 366w\"\n          sizes=\"(max-width: 366px) 100vw, 366px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/4ebbc37b342f624d0870af100c8a6f64/8b153/twitter_post2.png\"\n          alt=\"twitter post2\"\n          title=\"twitter post2\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n    </span></a></p>\n<p><a id=\"building-whirr\"></a></p>\n<h2 id=\"building-whirr\" style=\"position:relative;\"><a href=\"#building-whirr\" aria-label=\"building whirr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Building Whirr</h2>\n<p>Let’s build Whirr 0.3.0!</p>\n<p>Run the following command from inside the source directory.</p>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">cd ~/src/whirr-trunk</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">mvn clean install</span></span></code></pre>\n<p>The first time I installed this, it took 17 minutes to build, most of which was downloading dependencies. It failed downloading one of the dependencies and so failed to build.</p>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">[WARNING] Unable to get resource &#39;org.apache.hadoop:hadoop-core:jar:0.20.2&#39;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">from repository central (https://repo1.maven.org/maven2):</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">GET request of:</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">org/apache/hadoop/hadoop-core/0.20.2/hadoop-core-0.20.2.jar</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">from central failed</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] ------------------------------------------------------------------------</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[ERROR] BUILD ERROR</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] ------------------------------------------------------------------------</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Failed to resolve artifact.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Missing:</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">----------</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">1) org.apache.hadoop:hadoop-core:jar:0.20.2</span></span></code></pre>\n<p>The path to this dependency was ok, so it must have just been one of those unfortunate glitches in the magic workings of the Internet. Please let me know if you have a similar experience. The chances of this happening to you are very slim.</p>\n<p>I ran “mvn clean install” once more. </p>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">mvn clean install</span></span></code></pre>\n<p>This time is only took 2 minutes and built successfully.</p>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] ------------------------------------------------------------------------</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Reactor Summary:</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] ------------------------------------------------------------------------</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Whirr ................................................. SUCCESS [6.779s]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Apache Whirr Build Tools .............................. SUCCESS [2.017s]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Apache Whirr Core ..................................... SUCCESS [11.104s]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Apache Whirr Cassandra ................................ SUCCESS [3.332s]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Apache Whirr Hadoop ................................... SUCCESS [9.983s]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Apache Whirr ZooKeeper ................................ SUCCESS [7.584s]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Apache Whirr HBase .................................... SUCCESS [57.760s]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Apache Whirr CLI ...................................... SUCCESS [38.708s]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Apache Whirr Hadoop ................................... SUCCESS [1.884s]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] ------------------------------------------------------------------------</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] ------------------------------------------------------------------------</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] BUILD SUCCESSFUL</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] ------------------------------------------------------------------------</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Total time: 2 minutes 20 seconds</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Finished at: Mon Jan 24 12:49:58 PST 2011</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Final Memory: 90M/123M</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] ------------------------------------------------------------------------</span></span></code></pre>\n<p>Now that our code is compiled, we can run the final build command.</p>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">mvn package -Ppackage</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">(reduced output)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Scanning for projects...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Reactor build order:</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO]   Whirr</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO]   Apache Whirr Build Tools</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO]   Apache Whirr Core</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO]   Apache Whirr Cassandra</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO]   Apache Whirr Hadoop</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO]   Apache Whirr ZooKeeper</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO]   Apache Whirr HBase</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO]   Apache Whirr CLI</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO]   Apache Whirr Hadoop</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] ------------------------------------------------------------------------</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] Building Whirr</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO]    task-segment: [package]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[INFO] ------------------------------------------------------------------------</span></span></code></pre>\n<p><a id=\"launch-a-hbase-cluster\"></a></p>\n<h2 id=\"launch-a-hbase-cluster\" style=\"position:relative;\"><a href=\"#launch-a-hbase-cluster\" aria-label=\"launch a hbase cluster permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Launch A HBase Cluster</h2>\n<p>Currently in trunk there is a <em>recipe</em> under the “recipes” directory called “hbase-ec2″. We can copy that, although in this example we are not going to modify it.</p>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">cp recipes/hbase-ec2.properties .</span></span></code></pre>\n<p>There is many comments in there, so here is a summary. </p>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">whirr.cluster-name=hbase</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">whirr.instance-templates=1 zk+nn+jt+hbase-master,5 dn+tt+hbase-regionserver</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">whirr.provider=ec2</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">whirr.identity=${env:AWS_ACCESS_KEY_ID}</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">whirr.credential=${env:AWS_SECRET_ACCESS_KEY}</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">whirr.hardware-id=c1.xlarge</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">whirr.image-id=us-east-1/ami-da0cf8b3</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">whirr.location-id=us-east-1</span></span></code></pre>\n<p>In the above, the line you will want to play with is “whirr.instance-templates”, as this defines the shape and size of your cluster. Increasing the value “5″ will give you a bigger cluster.</p>\n<p>We have a total of 6 machines here. 1 machine runs all the master services and 5 more machines run all the worker services. Here is breakdown of the services running on those machines, as defined by <em>whirr.instance-templates</em>.</p>\n<table>\n<tr>\n<td>1 zk+nn+jt+hbase-master</td>\n<td>1 = 1 instance of the following\n<p>zk = Zookeeper<br/>nn = Hadoop Name-Node<br/>jt = Hadoop Job Tracker<br/>hbase-master = HBase Master</p></td>\n</tr>\n<td>5 dn+tt+hbase-regionserver</td>\n<td>5 = 5 instances of the following\n<p>dn = Hadoop Data-Node<br/>tt = Hadoop Task-Tracker<br/>hbase-regionserver = HBase Region Server</p></td>\n</table>\n<p>If you are interested in how all these Hadoop and HBase components work together, see Lars George’s excellent posts “<a href=\"https://www.larsgeorge.com/2009/10/hbase-architecture-101-storage.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">HBase Architecture 101 – Storage</a>” and <a href=\"https://www.larsgeorge.com/2010/01/hbase-architecture-101-write-ahead-log.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">HBase Architecture 101 – Write-ahead-Log</a>” or check-out the <a href=\"https://wiki.apache.org/hadoop/Hbase/HbaseArchitecture\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">HBase wiki</a>.</p>\n<p>In previous Whirr examples I have defined the Amazon EC2 credentials in this properties file, but the above will pick them up from the environment, which is a better way to go. Export you credentials into your environment (here I use dumby credentials as an example). </p>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">export AWS_ACCESS_KEY_ID=123456789ABCDEFGHIJKLM</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">export AWS_SECRET_ACCESS_KEY=ABCDabcd1234/xyzXZY54321acbd</span></span></code></pre>\n<p>We can now launch our cluster.</p>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">bin/whirr launch-cluster --config hbase-ec2.properties</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Bootstrapping cluster</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Configuring template</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Starting 1 node(s) with roles [jt, nn, zk, hbase-master]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Configuring template</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Starting 5 node(s) with roles [tt, hbase-regionserver, dn]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Nodes started: [[id=us-east-1/i-e134808d, providerId=i-e134808d, tag=hbase, name=null, location=[id=us-east-1d, scope=ZONE, description=us-east-1d, parent=us-east-1], uri=null, imageId=us-east-1/ami-da0cf8b3, os=[name=null, family=ubuntu, version=10.04, arch=paravirtual, is64Bit=true, description=ubuntu-images-us/ubuntu-lucid-10.04-amd64-server-20101020.manifest.xml], userMetadata={}, state=RUNNING, privateAddresses=[10.112.205.48], publicAddresses=[184.72.159.249], hardware=[id=c1.xlarge, providerId=c1.xlarge, name=c1.xlarge, processors=[[cores=8.0, speed=2.5]], ram=7168, volumes=[[id=null, type=LOCAL, size=10.0, device=/dev/sda1, durable=false, isBootDevice=true], [id=null, type=LOCAL, size=420.0, device=/dev/sdb, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdc, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdd, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sde, durable=false, isBootDevice=false]], supportsImage=is64Bit()]]]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Nodes started: [[id=us-east-1/i-f734809b, providerId=i-f734809b, tag=hbase, name=null, location=[id=us-east-1d, scope=ZONE, description=us-east-1d, parent=us-east-1], uri=null, imageId=us-east-1/ami-da0cf8b3, os=[name=null, family=ubuntu, version=10.04, arch=paravirtual, is64Bit=true, description=ubuntu-images-us/ubuntu-lucid-10.04-amd64-server-20101020.manifest.xml], userMetadata={}, state=RUNNING, privateAddresses=[10.194.127.79], publicAddresses=[50.16.154.13], hardware=[id=c1.xlarge, providerId=c1.xlarge, name=c1.xlarge, processors=[[cores=8.0, speed=2.5]], ram=7168, volumes=[[id=null, type=LOCAL, size=10.0, device=/dev/sda1, durable=false, isBootDevice=true], [id=null, type=LOCAL, size=420.0, device=/dev/sdb, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdc, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdd, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sde, durable=false, isBootDevice=false]], supportsImage=is64Bit()]], [id=us-east-1/i-fb348097, providerId=i-fb348097, tag=hbase, name=null, location=[id=us-east-1d, scope=ZONE, description=us-east-1d, parent=us-east-1], uri=null, imageId=us-east-1/ami-da0cf8b3, os=[name=null, family=ubuntu, version=10.04, arch=paravirtual, is64Bit=true, description=ubuntu-images-us/ubuntu-lucid-10.04-amd64-server-20101020.manifest.xml], userMetadata={}, state=RUNNING, privateAddresses=[10.98.33.250], publicAddresses=[50.16.71.166], hardware=[id=c1.xlarge, providerId=c1.xlarge, name=c1.xlarge, processors=[[cores=8.0, speed=2.5]], ram=7168, volumes=[[id=null, type=LOCAL, size=10.0, device=/dev/sda1, durable=false, isBootDevice=true], [id=null, type=LOCAL, size=420.0, device=/dev/sdb, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdc, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdd, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sde, durable=false, isBootDevice=false]], supportsImage=is64Bit()]], [id=us-east-1/i-f5348099, providerId=i-f5348099, tag=hbase, name=null, location=[id=us-east-1d, scope=ZONE, description=us-east-1d, parent=us-east-1], uri=null, imageId=us-east-1/ami-da0cf8b3, os=[name=null, family=ubuntu, version=10.04, arch=paravirtual, is64Bit=true, description=ubuntu-images-us/ubuntu-lucid-10.04-amd64-server-20101020.manifest.xml], userMetadata={}, state=RUNNING, privateAddresses=[10.195.6.143], publicAddresses=[204.236.242.78], hardware=[id=c1.xlarge, providerId=c1.xlarge, name=c1.xlarge, processors=[[cores=8.0, speed=2.5]], ram=7168, volumes=[[id=null, type=LOCAL, size=10.0, device=/dev/sda1, durable=false, isBootDevice=true], [id=null, type=LOCAL, size=420.0, device=/dev/sdb, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdc, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdd, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sde, durable=false, isBootDevice=false]], supportsImage=is64Bit()]], [id=us-east-1/i-f9348095, providerId=i-f9348095, tag=hbase, name=null, location=[id=us-east-1d, scope=ZONE, description=us-east-1d, parent=us-east-1], uri=null, imageId=us-east-1/ami-da0cf8b3, os=[name=null, family=ubuntu, version=10.04, arch=paravirtual, is64Bit=true, description=ubuntu-images-us/ubuntu-lucid-10.04-amd64-server-20101020.manifest.xml], userMetadata={}, state=RUNNING, privateAddresses=[10.119.22.224], publicAddresses=[174.129.72.44], hardware=[id=c1.xlarge, providerId=c1.xlarge, name=c1.xlarge, processors=[[cores=8.0, speed=2.5]], ram=7168, volumes=[[id=null, type=LOCAL, size=10.0, device=/dev/sda1, durable=false, isBootDevice=true], [id=null, type=LOCAL, size=420.0, device=/dev/sdb, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdc, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdd, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sde, durable=false, isBootDevice=false]], supportsImage=is64Bit()]], [id=us-east-1/i-f134809d, providerId=i-f134809d, tag=hbase, name=null, location=[id=us-east-1d, scope=ZONE, description=us-east-1d, parent=us-east-1], uri=null, imageId=us-east-1/ami-da0cf8b3, os=[name=null, family=ubuntu, version=10.04, arch=paravirtual, is64Bit=true, description=ubuntu-images-us/ubuntu-lucid-10.04-amd64-server-20101020.manifest.xml], userMetadata={}, state=RUNNING, privateAddresses=[10.98.146.48], publicAddresses=[174.129.142.130], hardware=[id=c1.xlarge, providerId=c1.xlarge, name=c1.xlarge, processors=[[cores=8.0, speed=2.5]], ram=7168, volumes=[[id=null, type=LOCAL, size=10.0, device=/dev/sda1, durable=false, isBootDevice=true], [id=null, type=LOCAL, size=420.0, device=/dev/sdb, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdc, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdd, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sde, durable=false, isBootDevice=false]], supportsImage=is64Bit()]]]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Authorizing firewall</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Authorizing firewall</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Authorizing firewall</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Running configuration script</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Configuration script run completed</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Running configuration script</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Configuration script run completed</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Completed configuration of hbase</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Web UI available at https://ec2-184-72-159-249.compute-1.amazonaws.com</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Wrote Hadoop site file /Users/phil/.whirr/hbase/hadoop-site.xml</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Wrote Hadoop proxy script /Users/phil/.whirr/hbase/hadoop-proxy.sh</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Completed configuration of hbase</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Hosts: ec2-184-72-159-249.compute-1.amazonaws.com:2181</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Completed configuration of hbase</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Web UI available at https://ec2-184-72-159-249.compute-1.amazonaws.com</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Wrote HBase site file /Users/phil/.whirr/hbase/hbase-site.xml</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Wrote HBase proxy script /Users/phil/.whirr/hbase/hbase-proxy.sh</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Wrote instances file /Users/phil/.whirr/hbase/instances</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Started cluster of 6 instances</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Cluster{instances=[Instance{roles=[tt, hbase-regionserver, dn], publicAddress=/204.236.242.78, privateAddress=/10.195.6.143, id=us-east-1/i-f5348099}, Instance{roles=[tt, hbase-regionserver, dn], publicAddress=/174.129.72.44, privateAddress=/10.119.22.224, id=us-east-1/i-f9348095}, Instance{roles=[tt, hbase-regionserver, dn], publicAddress=/50.16.71.166, privateAddress=/10.98.33.250, id=us-east-1/i-fb348097}, Instance{roles=[jt, nn, zk, hbase-master], publicAddress=ec2-184-72-159-249.compute-1.amazonaws.com/184.72.159.249, privateAddress=/10.112.205.48, id=us-east-1/i-e134808d}, Instance{roles=[tt, hbase-regionserver, dn], publicAddress=/174.129.142.130, privateAddress=/10.98.146.48, id=us-east-1/i-f134809d}, Instance{roles=[tt, hbase-regionserver, dn], publicAddress=/50.16.154.13, privateAddress=/10.194.127.79, id=us-east-1/i-f734809b}], configuration={hbase.zookeeper.quorum=ec2-184-72-159-249.compute-1.amazonaws.com:2181}}</span></span></code></pre>\n<p><a id=\"destroy\"></a></p>\n<h2 id=\"destroy\" style=\"position:relative;\"><a href=\"#destroy\" aria-label=\"destroy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Destroy!</h2>\n<p>At some point you will want to tear-down that cluster. Here is how you can do that.</p>\n<pre class=\"grvsc-container monokai\" data-language=\"\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">bin/whirr destroy-cluster --config hbase-ec2.properties</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Destroying hbase cluster</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Cluster hbase destroyed</span></span></code></pre>\n<p><a id=\"conclusion\"></a></p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>Congratulations! If you have followed through this example, then you now have your own HBase cluster running in the cloud. Now… what to do with that HBase cluster? <a href=\"Stay%20tuned%20for%20a%20future%20posts\">/</a>.</p>\n<h2 id=\"comments\" style=\"position:relative;\"><a href=\"#comments\" aria-label=\"comments permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Comments</h2>\n<div id=\"comments\">\n  <ol class=\"comment-list\">\n    <li id=\"comment-851\" class=\"comment even thread-even depth-1 comment reader\">\n      <img alt=\"Lars George\" src=\"https://1.gravatar.com/avatar/b66b4b8f23c553ed389edd73522d4cd1?s=80&amp;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\" title=\"https://cloudera.com\">Lars George</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Tuesday, January 25th, 2011, 6:09 am\">January 25, 2011</abbr> at <abbr class=\"comment-time\" title=\"Tuesday, January 25th, 2011, 6:09 am\">6:09 am</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>Hi Phil, </p>\n        <p>Great post! We are still working on a few kinks but once Whirr 0.3.0 is out and will be released with CDH it will be even easier to get going as no build is required (obviously).</p>\n        <p>A few notes, you are missing the &#x201C;tt&#x201D; (i.e TaskTracker) in the explanation table for the cluster template. Also, just to reiterate, all of the above services share the same instance. So in your example you will start 1+5 EC2 server with the various services running on them. </p>\n        <p>Finally, what is also cool is that Whirr creates a local &#x201C;$HOME/.whirr//&#x201D; directory, so in your example $HOME/.whirr/hbase/ which has various files to help you working with the cluster. One of those is the &#x201C;hadoop-proxy.sh&#x201D; (start it like &#x201C;source $HOME/.whirr/hbase/hadoop-proxy.sh &amp;&#x201D; to launch it in the background) which sets up the SOCKS proxy for you so that you can talk to the servers and access the web UI for the master and region servers.</p>\n        <p>There is also a &#x201C;instances&#x201D; which lists nicely the servers in the cluster, their local and remote IPs and roles. It could be used by a script or program to parse the details and be able to communicate with the servers.</p>\n        <p>Thanks again for writing this post!</p>\n        <p>Regards,<br>\nLars</p>\n      </div>\n      <!-- .comment-text -->\n      <ol class=\"children\">\n        <li id=\"comment-854\" class=\"comment byuser comment-author-admin bypostauthor odd alt depth-2 comment role-administrator user-admin entry-author\">\n          <img alt=\"Phil Whelan\" src=\"https://1.gravatar.com/avatar/5f357d996da96ccd36d3374e3728bf29?s=80&amp;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n          <div class=\"comment-meta comment-meta-data\">\n            <div class=\"comment-author vcard\">\n              <cite class=\"fn\" title=\"https://www.bigfastblog.com\">Phil Whelan</cite>\n            </div>\n            <!-- .comment-author .vcard -->\n            <abbr class=\"comment-date\" title=\"Tuesday, January 25th, 2011, 9:16 am\">January 25, 2011</abbr> at <abbr class=\"comment-time\" title=\"Tuesday, January 25th, 2011, 9:16 am\">9:16 am</abbr>\n          </div>\n          <div class=\"comment-text\">\n            <p>Thanks for the comments Lars. Well spotted on that missing &#x201C;tt&#x201D;! I&#x2019;ve also clarified the number of EC2 machines in use, as this was not clear.</p>\n            <p>I&#x2019;m looking forward to 0.3.0 of Whirr being released and the general progress of it. It is a fantastic tool for getting up and running in the cloud. Thanks to yourself and all the committers!</p>\n          </div>\n          <!-- .comment-text -->\n        </li>\n        <!-- .comment -->\n      </ol>\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-1017\" class=\"comment even thread-odd thread-alt depth-1 comment reader\">\n      <img alt=\"Lynn Monson\" src=\"https://1.gravatar.com/avatar/33bbbf4053c9c66fb798c6314b524983?s=80&amp;d=https%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\" title=\"https://lmonson.com/\">Lynn Monson</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Wednesday, February 9th, 2011, 1:29 pm\">February 9, 2011</abbr> at <abbr class=\"comment-time\" title=\"Wednesday, February 9th, 2011, 1:29 pm\">1:29 pm</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>Very helpful.  The only thing I tripped on was understanding how the local keypair file relates to Whirr.  In my case, I followed your tutorial from a clean machine, itself running on EC2.  Since that machine had no ~/.ssh/id_rsa file, Whirr failed.</p>\n        <p>It&#x2019;s still not completely clear to me how Whirr bootstraps the machines, but I did learn that eventually Whirr uploads your local public key to the bootstrapped instances.   So a simple invocation of ssh-keygen -t rsa got everything running.</p>\n        <p>Thanks again for the time and effort spent on this tutorial.</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-1046\" class=\"comment odd alt thread-even depth-1 comment reader\">\n      <img alt=\"Eugene Koontz\" src=\"https://0.gravatar.com/avatar/8c63eef99e2c33a10aed425610c37b97?s=80&amp;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\" title=\"https://cloudsecurity.trendmicro.com/\">Eugene Koontz</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Friday, February 11th, 2011, 12:00 pm\">February 11, 2011</abbr> at <abbr class=\"comment-time\" title=\"Friday, February 11th, 2011, 12:00 pm\">12:00 pm</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>Thanks a lot for this post; I found that your instructions work great, but if you prefer to use git, you can do :</p>\n        <p>git clone git://git.apache.org/whirr.git </p>\n        <p>instead of:</p>\n        <p>svn co https://svn.apache.org/repos/asf/incubator/whirr/trunk whirr-trunk</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-8467\" class=\"comment even thread-odd thread-alt depth-1 comment reader\">\n      <img alt=\"Tim\" src=\"https://0.gravatar.com/avatar/065953e347e1601e26a0fbb310e93f61?s=80&amp;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\">Tim</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Friday, January 27th, 2012, 5:44 am\">January 27, 2012</abbr> at <abbr class=\"comment-time\" title=\"Friday, January 27th, 2012, 5:44 am\">5:44 am</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>Great instructions!<br>\nI believe the /incubator is not needed in the svn URL</p>\n        <p>When mine starts, it says:</p>\n        <p>Completed configuration of hbase<br>\nWeb UI available at https://107.20.125.231<br>\nWrote HBase site file /Users/tim/.whirr/hbase/hbase-site.xml<br>\nWrote HBase proxy script /Users/tim/.whirr/hbase/hbase-proxy.sh<br>\nCompleted configuration of hbase role hadoop-datanode<br>\nCompleted configuration of hbase role hadoop-tasktracker<br>\nStarting to run scripts on cluster for phase start on instances: us-east-1/i-116dab74<br>\nRunning start phase script on: us-east-1/i-116dab74<br>\nstart phase script run completed on: us-east-1/i-116dab74<br>\nSuccessfully executed start script: [output=, error=, exitCode=0]<br>\nFinished running start phase scripts on all cluster instances<br>\nStarted cluster of 4 instances</p>\n        <p>but it seems only the zookeeper actually started up and there is no JT or HBase master:  </p>\n        <p>tim@ip-10-79-37-92:~$ ps -ef | grep java<br>\nroot      3214     1  0 13:29 ?        00:00:00 java -Dzookeeper.log.dir=. -Dzookeeper.root.logger=INFO,CONSOLE -cp /usr/local/zookeeper-3.3.3/bin/../build/classes:/usr/local/zookeeper-3.3.3/bin/../build/lib/*.jar:/usr/local/zookeeper-3.3.3/bin/../zookeeper-3.3.3.jar:/usr/local/zookeeper-3.3.3/bin/../lib/log4j-1.2.15.jar:/usr/local/zookeeper-3.3.3/bin/../lib/jline-0.9.94.jar:/usr/local/zookeeper-3.3.3/bin/../src/java/lib/*.jar:/etc/zookeeper/conf: -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain /etc/zookeeper/conf/zoo.cfg</p>\n        <p>All the slave node services started it seems.</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n    <li id=\"comment-30563\" class=\"comment odd alt thread-even depth-1 comment reader\">\n      <img alt=\"Kiko Aumond\" src=\"https://0.gravatar.com/avatar/a329bdda562648b4d4a3fd8f679443e6?s=80&amp;d=https%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG\" class=\"avatar avatar-80 photo\" height=\"80\" width=\"80\">\n      <div class=\"comment-meta comment-meta-data\">\n        <div class=\"comment-author vcard\">\n          <cite class=\"fn\">Kiko Aumond</cite>\n        </div>\n        <!-- .comment-author .vcard -->\n        <abbr class=\"comment-date\" title=\"Thursday, January 3rd, 2013, 9:20 am\">January 3, 2013</abbr> at <abbr class=\"comment-time\" title=\"Thursday, January 3rd, 2013, 9:20 am\">9:20 am</abbr>\n      </div>\n      <div class=\"comment-text\">\n        <p>This is an extremely useful post, thank you so much for writing it!</p>\n      </div>\n      <!-- .comment-text -->\n    </li>\n    <!-- .comment -->\n  </ol>\n  <!-- .comment-list -->\n</div>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .monokai {\n    background-color: #272822;\n    color: #f8f8f2;\n  }\n  .monokai .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","fields":{"slug":"/run-the-latest-whirr-and-deploy-hbase-in-minutes","tagSlugs":["/tag/amazon-ec-2/","/tag/cloud-computing/","/tag/hadoop/","/tag/hbase/","/tag/maven/","/tag/nosql/","/tag/ruby/","/tag/whirr/","/tag/zookeeper/"]},"frontmatter":{"date":"2011-01-24T16:17:00-08:00","description":"In a few of my recent posts I have covered the ease of deploying clusters of Hadoop and Cassandra using Whirr. With Whirr you can simply write a","tags":["amazon ec2","cloud-computing","hadoop","hbase","maven","nosql","ruby","whirr","zookeeper"],"title":"Run The Latest Whirr And Deploy HBase In Minutes","socialImage":{"publicURL":{"publicURL":"/static/0bde90f4c234a53ed3d1973b869ec1cb/whirr_hbase_sq.jpg"}}}}},"pageContext":{"slug":"/run-the-latest-whirr-and-deploy-hbase-in-minutes"}},"staticQueryHashes":["251939775","3942705351","401334301"]}