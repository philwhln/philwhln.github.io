<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" xml:lang="en-US">
<head profile="http://gmpg.org/xfn/11">
<title>Ruby’s EventMachine – Part 2 : Asynchronous != Faster | Big Fast Blog</title>

<link rel="stylesheet" href="/wp-content/themes/hybrid/style.css" type="text/css" media="screen" />
<link rel="author" href="https://plus.google.com/101358683928607234715/posts"/>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="alternate" type="application/rss+xml" title="Big Fast Blog &raquo; Ruby’s EventMachine – Part 2 : Asynchronous != Faster Comments Feed" href="/ruby-eventmachine-part-2-asynchronous-not-equal-faster/feed" />
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js'></script>
<script type='text/javascript' src='/wp-content/plugins/sharebar/js/sharebar.js'></script>
<meta name="description" content="In this post I will look synchronous vs asynchronous programming with Ruby's EventMachine, to show that asynchronous does not always mean that your code will run faster. In part 1 of this series on Ruby's EventMachine I discussed the benefits of event-based programming in general. I am a big fan of event-based programming, as you will see in these posts, but I wanted to flip the coin over and look at one of the down-sides of event-based programming." />
<meta name="keywords" content="asynchronous,benchmark,event-loop,eventmachine,fast,memcached,ruby,synchronous,tornado" />
<link rel="canonical" href="/ruby-eventmachine-part-2-asynchronous-not-equal-faster" />
  <link rel="stylesheet" href="/wp-content/plugins/sharebar/css/sharebar.css" type="text/css" media="screen" />
<script type="text/javascript">jQuery(document).ready(function($) { $('.sharebar').sharebar({horizontal:'true',swidth:'65',minwidth:1000,position:'left',leftOffset:20,rightOffset:10}); });</script>

</head>

<body>

<div id="body-container">
  <div id="container">

  <div id="content" class="hfeed content">

    <div id="utility-before-content" class="sidebar utility">

      <div id="text-13" class="widget widget_text widget-widget_text"><div class="widget-inside">      <div class="textwidget"><a href="https://twitter.com/philwhln" class="twitter-follow-button" data-show-count="true" data-lang="en">Follow @philwhln</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
    </div></div>
    </div><!-- #utility-before-content .utility -->

      <div id="post-1721" class="hentry post publish post-1 odd author-admin category-eventmachine category-ruby-2 category-web-development post_tag-asynchronous post_tag-benchmark post_tag-event-loop post_tag-eventmachine-2 post_tag-fast post_tag-memcached post_tag-ruby post_tag-synchronous post_tag-tornado">

        <h1 class="post-title entry-title"><a href="/ruby-eventmachine-part-2-asynchronous-not-equal-faster" title="Ruby’s EventMachine – Part 2 : Asynchronous != Faster" rel="bookmark">Ruby’s EventMachine – Part 2 : Asynchronous != Faster</a></h1><p class="byline"><span class="byline-prep byline-prep-author">By</span> <span class="author vcard">Phil Whelan</span> <span class="byline-prep byline-prep-published">on</span> <abbr class="published" title="Monday, September 24th, 2012, 1:19 pm">September 24, 2012</abbr> </p>
        <div class="entry-content">
          <ul id="sharebar" style="background:#;border-color:#;">
<li><a href="http://twitter.com/share" class="twitter-share-button" data-count="vertical" data-via="philwhln">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></li><li><iframe src="http://www.facebook.com/plugins/like.php?href=http://www.bigfastblog.com/ruby-eventmachine-part-2-asynchronous-not-equal-faster&layout=box_count&show_faces=false&width=60&action=like&colorscheme=light&height=45" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:45px; height:60px;" allowTransparency="true"></iframe></li></ul><ul id="sharebarx">
<li><a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="philwhln">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></li><li><iframe src="http://www.facebook.com/plugins/like.php?href=http://www.bigfastblog.com/ruby-eventmachine-part-2-asynchronous-not-equal-faster&layout=button_count&show_faces=false&width=85&action=like&colorscheme=light&height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:85px; height:21px;" allowTransparency="true"></iframe></li></ul><p>In this post I will look synchronous vs asynchronous programming with Ruby&#8217;s <a href="https://github.com/eventmachine/eventmachine">EventMachine</a>, to show that asynchronous does not always mean that your code will run faster.</p>
<p>In <a href="/rubys-eventmachine-part-1-event-based-programming">part 1</a> of this series on Ruby&#8217;s EventMachine I discussed the benefits of event-based programming in general. I am a big fan of event-based programming, as you will see in these posts, but I wanted to flip the coin over and look at one of the down-sides of event-based programming. </p>
<h2>The Cost</h2>
<p>Managing events does not come for free. There is overhead of wrapping code in callbacks, stashing context, queuing events, deleting events, managing timer events and communication the the operating system.</p>
<h2>Exhibit A</h2>
<p>With the example I am using for this post, we talk over a TCP network connection and perform a high number of transactions in a short period of time. If you read <a href="/rubys-eventmachine-part-1-event-based-programming">part 1</a>, then you will know that this sounds like an ideal use-case for EventMachine to really shine.</p>
<p>The example I am going to use is Memcached. Memcached is fast. If you have a low-latency network connection to Memached, then it is really fast.</p>
<p>Memcached, as its name implies, runs in memory, so the only thing that is going to slow it down is it being overwhelmed with network requests or some inefficiency in its algorithms (which are CPU bound). Personally, I have never hit the upper-bound of either of these, as there is always something else in the my architecture which croaks first.</p>
<h2>The Test</h2>
<p>I wrote a test to see if asynchronous memcached communication, using EventMachine, or synchronous memcached communication, using the <a href="https://github.com/evan/memcached/blob/master/README.rdoc">memcached</a> gem, would be faster.</p>
<p>Here is the code&#8230;</p>
<div class="CodeRay">
<div class="code">
<pre>
require <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">eventmachine</span><span style="color:#710">'</span></span> <span style="color:#777"># for async</span>
require <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">memcached</span><span style="color:#710">'</span></span>    <span style="color:#777"># for sync</span>
require <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">benchmark</span><span style="color:#710">'</span></span>

<span style="color:#036;font-weight:bold">DEBUG</span> = <span style="color:#069">false</span>
<span style="color:#036;font-weight:bold">TEST_SIZE</span> = <span style="color:#00D">100_000</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">debug</span> msg
  <span style="color:#080;font-weight:bold">if</span> <span style="color:#036;font-weight:bold">DEBUG</span>
    <span style="color:#d70">$stderr</span>.puts msg
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">async</span>
  <span style="color:#036;font-weight:bold">EM</span>.run <span style="color:#080;font-weight:bold">do</span>
    cache = <span style="color:#036;font-weight:bold">EventMachine</span>::<span style="color:#036;font-weight:bold">Protocols</span>::<span style="color:#036;font-weight:bold">Memcache</span>.connect <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">localhost</span><span style="color:#710">'</span></span>, <span style="color:#00D">11211</span>
    debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">sending SET requests...</span><span style="color:#710">&quot;</span></span>
    (<span style="color:#00D">1</span>..<span style="color:#036;font-weight:bold">TEST_SIZE</span>).each <span style="color:#080;font-weight:bold">do</span> |n|
      cache.set <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">key</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">value</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span> <span style="color:#080;font-weight:bold">do</span>
        debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">  SET key</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> complete</span><span style="color:#710">&quot;</span></span>
      <span style="color:#080;font-weight:bold">end</span>
    <span style="color:#080;font-weight:bold">end</span>
    debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SET requests sent</span><span style="color:#710">&quot;</span></span>
    debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">sending GET requests...</span><span style="color:#710">&quot;</span></span>
    (<span style="color:#00D">1</span>..<span style="color:#036;font-weight:bold">TEST_SIZE</span>).each <span style="color:#080;font-weight:bold">do</span> |n|
      cache.get <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">key</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span> <span style="color:#080;font-weight:bold">do</span> |value|
        debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">  GET key</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> = </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>value<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> complete</span><span style="color:#710">&quot;</span></span>
      <span style="color:#080;font-weight:bold">end</span>
    <span style="color:#080;font-weight:bold">end</span>
    debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">GET requests sent</span><span style="color:#710">&quot;</span></span>
    debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">sending DEL requests...</span><span style="color:#710">&quot;</span></span>
    (<span style="color:#00D">1</span>..<span style="color:#036;font-weight:bold">TEST_SIZE</span>).each <span style="color:#080;font-weight:bold">do</span> |n|
      cache.del(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">key</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>) <span style="color:#080;font-weight:bold">do</span>
        debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">  DEL key</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> complete</span><span style="color:#710">&quot;</span></span>
        <span style="color:#080;font-weight:bold">if</span> n == <span style="color:#036;font-weight:bold">TEST_SIZE</span>
          <span style="color:#036;font-weight:bold">EM</span>.stop
        <span style="color:#080;font-weight:bold">end</span>
      <span style="color:#080;font-weight:bold">end</span>
    <span style="color:#080;font-weight:bold">end</span>
    debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">DEL requests sent</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">sync</span>
  cache = <span style="color:#036;font-weight:bold">Memcached</span>.new(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">localhost:11211</span><span style="color:#710">&quot;</span></span>)
  debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">sending SET requests...</span><span style="color:#710">&quot;</span></span>
  (<span style="color:#00D">1</span>..<span style="color:#036;font-weight:bold">TEST_SIZE</span>).each <span style="color:#080;font-weight:bold">do</span> |n|
    cache.set <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">key</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">value</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
    debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">  SET key</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> complete</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>
  debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SET requests sent</span><span style="color:#710">&quot;</span></span>
  debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">sending GET requests...</span><span style="color:#710">&quot;</span></span>
  (<span style="color:#00D">1</span>..<span style="color:#036;font-weight:bold">TEST_SIZE</span>).each <span style="color:#080;font-weight:bold">do</span> |n|
    value = cache.get <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">key</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
    debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">  GET key</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> = </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>value<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> complete</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>
  debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">GET requests sent</span><span style="color:#710">&quot;</span></span>
  debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">sending DEL requests...</span><span style="color:#710">&quot;</span></span>
  (<span style="color:#00D">1</span>..<span style="color:#036;font-weight:bold">TEST_SIZE</span>).each <span style="color:#080;font-weight:bold">do</span> |n|
    cache.delete(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">key</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>)
    debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">  DEL key</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> complete</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>
  debug <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">DEL requests sent</span><span style="color:#710">&quot;</span></span>
<span style="color:#080;font-weight:bold">end</span>

puts <span style="color:#036;font-weight:bold">Benchmark</span>.measure { puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">sync:</span><span style="color:#710">&quot;</span></span>;  sync  }
puts <span style="color:#036;font-weight:bold">Benchmark</span>.measure { puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">async:</span><span style="color:#710">&quot;</span></span>; async }
</pre>
</div>
</div>
<h2>The Results</h2>
<p>We are using <a href="http://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html">benchmark</a> to measure the time taken.</p>
<pre>$ ruby memcached.rb
sync:
  4.170000   4.360000   8.530000 ( 17.299242)
async:
 32.150000   0.990000  33.140000 ( 33.246160)
</pre>
<blockquote><p>This report shows the user CPU time, system CPU time, the sum of the user and system CPU times, and the elapsed real time. The unit of time is seconds. (from <a href="http://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html">Benchmark docs</a>)</p></blockquote>
<p>So we can see from the above that EventMachine-based version took about twice as long to run, took 8 times as much user CPU time and over 4 times as much system CPU time. That is quite significant.</p>
<h2>Avoid EventMachine With Memcached?</h2>
<p>This test needs to be put in context. The test was being run on same machine as Memcached, so the network latency was extremely low. EventMachine was not being used for anything else and this script had no other tasks to perform in-between sending requests to Memcached and receiving the responses, so blocking was not an issue.</p>
<p>I could benchmark this and conclude that synchronous Memcached usage was the way to go. I would then roll it out to production, where Memcached is running on a different machine in a different data-center (please do not do this), and the latency would kill this synchronous script. Where you have latency and many requests, asynchronous event-based programming is usually going to win.</p>
<p>Therefore, if the context is such that this kind of synchronous model works better for you, performance is important and you can be sure that things are not going to change, then <em>maybe</em> it is worth consideration.</p>
<h2>Suck It Up</h2>
<p>Nearly everything application I write now is event-based. I use EventMachine in Ruby and Tornado&#8217;s <a href="http://www.tornadoweb.org/documentation/ioloop.html">io_loop</a> in Python. I write high performance code and do everything non-blocking, because I do not want anything to halt my event-loop, ever.</p>
<p>I will gladly take a little overhead and fire up a new process or a new machine, if necessary, if it means that an external service like Memcached will not bring my event-loop to a halt when it has issues. It may be fast now, but one network glitch or Memcached crash may render my event-loop defunct. I might go from processing 10k requests per second to processing 1 per second, if I have a timeout of 1 second on one blocking network connection. So, yes, I will gladly suck up this asynchronous overhead in the short-term to protect from [expected] unexpected issues in the future.</p>
<h2>Can EventMachine Be Faster?</h2>
<p>I am a believer that anything can be better, faster, stronger. EventMachine is already heavily written in C++, which itself is a clear sign that its operation is CPU-bound.</p>
<p>There is a pure ruby implementation of EventMachine. You can play with this to compare the performance of the C++ implementation. In basic tests, you unlikely see a difference. The general benefit you get with an event-based system, when dealing with latency in disk and network I/O, far out-weighs the overhead of the event-system. It is only when you start to hit it extremely hard you will see the differences.</p>
<p>A faster EventMachine would be great, but it will make little difference to you when comparing with asynchronous code. You can never escape the overhead that asynchronous code adds. Therefore, synchronous code will continue to much look much faster in examples like the one above.</p>
<p>Event-based programming enables your application to utilize 100% of the cpu, because anything not cpu-bound can be passed off to the operating system. Therefore, if our code-base is truly event-based, we would only see the benefit of a faster EventMachine once we hit 100% utilization of the CPU.</p>
<p><strong>Side note:</strong> I have hit some bugs when using the pure-ruby implementation in my code and the EventMachine test-suite was not passing for me when trying to use pure-ruby. The test-suite is now passing with the latest HEAD of the <a href="https://github.com/eventmachine/eventmachine">git repository</a>, so these might have been a temporary issues, but it  highlighted to me the order of priority for C++ vs pure-ruby implementations.</p>
<h2>Resources</h2>
<ul>
<li><a href="https://groups.google.com/forum/?fromgroups=#!forum/eventmachine">EventMachine Mailing-list</a></li>
</ul>
<h2>Ruby’s EventMachine</h2>
<p>Other posts in this series</p>
<ul>
<li><a href="/rubys-eventmachine-part-1-event-based-programming">Part 1 : Event-based Programming</a></li>
<li><a href="/ruby-eventmachine-part-2-asynchronous-not-equal-faster">Part 2 : Asynchronous != Faster</a></li>
</ul>
<h2>Posted in : <a href="/category/ruby-2"> Ruby</a></h2>
                  </div><!-- .entry-content -->

        <p class="entry-meta"><span class="category">Posted in <a href="/category/ruby-2/eventmachine" rel="tag">EventMachine</a>, <a href="/category/ruby-2" rel="tag">Ruby</a>, <a href="/category/web-development" rel="tag">Web Development</a></span> <span class="post_tag">| Tagged <a href="/tag/asynchronous" rel="tag">asynchronous</a>, <a href="/tag/benchmark" rel="tag">benchmark</a>, <a href="/tag/event-loop" rel="tag">event-loop</a>, <a href="/tag/eventmachine-2" rel="tag">eventmachine</a>, <a href="/tag/fast" rel="tag">fast</a>, <a href="/tag/memcached" rel="tag">memcached</a>, <a href="/tag/ruby" rel="tag">ruby</a>, <a href="/tag/synchronous" rel="tag">synchronous</a>, <a href="/tag/tornado" rel="tag">tornado</a></span> | <a class="comments-link" href="/ruby-eventmachine-part-2-asynchronous-not-equal-faster#comments" title="Comment on Ruby’s EventMachine – Part 2 : Asynchronous != Faster">9 Responses</a></p>
      </div><!-- .hentry -->

<div id="comments-template">

    <div id="comments">

      <h3 id="comments-number" class="comments-header">9 responses to &#8220;Ruby’s EventMachine – Part 2 : Asynchronous != Faster&#8221;</h3>

      <ol class="comment-list">

  <li id="comment-22146" class="comment even thread-even depth-1 comment reader">

    <img alt='yuan' src='http://0.gravatar.com/avatar/47081f2906ff164aadfa8eea575c4189?s=80&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG' class='avatar avatar-80 photo' height='80' width='80' /><div class="comment-meta comment-meta-data"><div class="comment-author vcard"><cite class="fn">yuan</cite></div><!-- .comment-author .vcard --> <span class="published"><abbr class="comment-date" title="Monday, September 24th, 2012, 7:56 pm">September 24, 2012</abbr> at <abbr class="comment-time" title="Monday, September 24th, 2012, 7:56 pm">7:56 pm</abbr></span> | <a class="permalink" href="/ruby-eventmachine-part-2-asynchronous-not-equal-faster/comment-page-1#comment-22146" title="Permalink to comment ">Permalink</a>  </div>
    <div class="comment-text">

      <p>great!  how can I integrate eventmachine to my rails apps?</p>
    </div><!-- .comment-text -->

  </li><!-- .comment -->
  <li id="comment-22151" class="comment odd alt thread-odd thread-alt depth-1 comment reader">

    <a href="http://ludovic-henry.com" rel="external nofollow" title="Ludovic Henry"><img alt='Ludovic Henry' src='http://0.gravatar.com/avatar/cfaf18c547ad83146d89bba7cdca1339?s=80&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG' class='avatar avatar-80 photo' height='80' width='80' /></a><div class="comment-meta comment-meta-data"><div class="comment-author vcard"><cite class="fn" title="http://ludovic-henry.com"><a href="http://ludovic-henry.com" title="Ludovic Henry" class="url" rel="external nofollow">Ludovic Henry</a></cite></div><!-- .comment-author .vcard --> <span class="published"><abbr class="comment-date" title="Monday, September 24th, 2012, 10:48 pm">September 24, 2012</abbr> at <abbr class="comment-time" title="Monday, September 24th, 2012, 10:48 pm">10:48 pm</abbr></span> | <a class="permalink" href="/ruby-eventmachine-part-2-asynchronous-not-equal-faster/comment-page-1#comment-22151" title="Permalink to comment ">Permalink</a>  </div>
    <div class="comment-text">

      <p>What are the results if you use epoll instead of select? Thank you.</p>
    </div><!-- .comment-text -->

  <ol class='children'>

  <li id="comment-22286" class="comment byuser comment-author-admin bypostauthor even depth-2 comment role-administrator user-admin entry-author">

    <a href="https://www.google.com/profiles/101358683928607234715" rel="external nofollow" title="Phil Whelan"><img alt='Phil Whelan' src='http://1.gravatar.com/avatar/5f357d996da96ccd36d3374e3728bf29?s=80&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG' class='avatar avatar-80 photo' height='80' width='80' /></a><div class="comment-meta comment-meta-data"><div class="comment-author vcard"><cite class="fn" title="https://www.google.com/profiles/101358683928607234715"><a href="https://www.google.com/profiles/101358683928607234715" title="Phil Whelan" class="url" rel="external nofollow">Phil Whelan</a></cite></div><!-- .comment-author .vcard --> <span class="published"><abbr class="comment-date" title="Thursday, September 27th, 2012, 10:53 am">September 27, 2012</abbr> at <abbr class="comment-time" title="Thursday, September 27th, 2012, 10:53 am">10:53 am</abbr></span> | <a class="permalink" href="/ruby-eventmachine-part-2-asynchronous-not-equal-faster/comment-page-1#comment-22286" title="Permalink to comment ">Permalink</a>  </div>
    <div class="comment-text">

      <p>Hi Ludovic,</p>
<p>I added EM.epoll before EM.run and here are the results</p>
<p>$ ruby memcached.rb<br />
sync:<br />
  3.950000   4.240000   8.190000 ( 16.496183)<br />
async:<br />
 40.090000   1.110000  41.200000 ( 41.708882)</p>
<p>Actually a little worse performance, but this is running on my Mac and epoll is for multiplexed I/O that is available in Linux 2.6 kernels.</p>
<p>Cheers,<br />
Phil</p>
    </div><!-- .comment-text -->

  <ol class='children'>

  <li id="comment-22319" class="comment odd alt depth-3 comment reader">

    <a href="http://ludovic-henry.com" rel="external nofollow" title="Ludovic Henry"><img alt='Ludovic Henry' src='http://0.gravatar.com/avatar/cfaf18c547ad83146d89bba7cdca1339?s=80&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG' class='avatar avatar-80 photo' height='80' width='80' /></a><div class="comment-meta comment-meta-data"><div class="comment-author vcard"><cite class="fn" title="http://ludovic-henry.com"><a href="http://ludovic-henry.com" title="Ludovic Henry" class="url" rel="external nofollow">Ludovic Henry</a></cite></div><!-- .comment-author .vcard --> <span class="published"><abbr class="comment-date" title="Friday, September 28th, 2012, 1:19 am">September 28, 2012</abbr> at <abbr class="comment-time" title="Friday, September 28th, 2012, 1:19 am">1:19 am</abbr></span> | <a class="permalink" href="/ruby-eventmachine-part-2-asynchronous-not-equal-faster/comment-page-1#comment-22319" title="Permalink to comment ">Permalink</a>  </div>
    <div class="comment-text">

      <p>If you are using OS/X &#8211; BSD, you should be using kqueue with &#8220;EM.kqueue = true if EM.kqueue?&#8221;.</p>
<p>About Epoll, if it&#8217;s not available on the platform (not on linux2.6+), it should fallback to select..</p>
    </div><!-- .comment-text -->

  </li><!-- .comment --></ol>
</li><!-- .comment --></ol>
</li><!-- .comment -->
  <li id="comment-22451" class="comment even thread-even depth-1 comment reader">

    <img alt='Phil Pirozhkov' src='http://1.gravatar.com/avatar/bb3cf80b7af6b40db1b3b2445ee738a1?s=80&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG' class='avatar avatar-80 photo' height='80' width='80' /><div class="comment-meta comment-meta-data"><div class="comment-author vcard"><cite class="fn">Phil Pirozhkov</cite></div><!-- .comment-author .vcard --> <span class="published"><abbr class="comment-date" title="Sunday, September 30th, 2012, 3:45 pm">September 30, 2012</abbr> at <abbr class="comment-time" title="Sunday, September 30th, 2012, 3:45 pm">3:45 pm</abbr></span> | <a class="permalink" href="/ruby-eventmachine-part-2-asynchronous-not-equal-faster/comment-page-1#comment-22451" title="Permalink to comment ">Permalink</a>  </div>
    <div class="comment-text">

      <p>It&#8217;s a very good example that EM is still far from being perfect.<br />
This is mostly due to the poor memcached protocol implementation, which adds all these callbacks to an array and is poping it one by one.</p>
<p>There&#8217;s a problem in test itself, you should consider that in evented style you never know which operation finishes first, and you cannot be sure that DEL is sent after SET and GET. So this should be better:</p>
<div class="CodeRay">
<div class="code">
<pre>require <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">em-synchrony</span><span style="color:#710">'</span></span>
require <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">em-synchrony/em-memcache</span><span style="color:#710">'</span></span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">async2</span>
  <span style="color:#036;font-weight:bold">EventMachine</span>.synchrony <span style="color:#080;font-weight:bold">do</span>
    cache = <span style="color:#036;font-weight:bold">EM</span>::<span style="color:#036;font-weight:bold">P</span>::<span style="color:#036;font-weight:bold">Memcache</span>.connect

    <span style="color:#036;font-weight:bold">TEST_SIZE</span>.times <span style="color:#080;font-weight:bold">do</span> |n|
      cache.set <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">key</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">value</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
    <span style="color:#080;font-weight:bold">end</span>
    <span style="color:#036;font-weight:bold">TEST_SIZE</span>.times <span style="color:#080;font-weight:bold">do</span> |n|
      value = cache.get <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">key</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
    <span style="color:#080;font-weight:bold">end</span>
    <span style="color:#036;font-weight:bold">TEST_SIZE</span>.times <span style="color:#080;font-weight:bold">do</span> |n|
      cache.delete(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">key</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>n<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>)
    <span style="color:#080;font-weight:bold">end</span>

    <span style="color:#036;font-weight:bold">EventMachine</span>.stop
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

puts <span style="color:#036;font-weight:bold">Benchmark</span>.measure { puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">async:</span><span style="color:#710">&quot;</span></span>; async2 }
</pre>
</div>
</div>
<p>However, the overhead is the same.</p>
    </div><!-- .comment-text -->

  <ol class='children'>

  <li id="comment-22455" class="comment odd alt depth-2 comment reader">

    <img alt='Phil Pirozhkov' src='http://1.gravatar.com/avatar/bb3cf80b7af6b40db1b3b2445ee738a1?s=80&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG' class='avatar avatar-80 photo' height='80' width='80' /><div class="comment-meta comment-meta-data"><div class="comment-author vcard"><cite class="fn">Phil Pirozhkov</cite></div><!-- .comment-author .vcard --> <span class="published"><abbr class="comment-date" title="Sunday, September 30th, 2012, 4:29 pm">September 30, 2012</abbr> at <abbr class="comment-time" title="Sunday, September 30th, 2012, 4:29 pm">4:29 pm</abbr></span> | <a class="permalink" href="/ruby-eventmachine-part-2-asynchronous-not-equal-faster/comment-page-1#comment-22455" title="Permalink to comment ">Permalink</a>  </div>
    <div class="comment-text">

      <p>Forgot to mention that on my machine sync is only 50%-100% faster than async given your benchmark. (2 cores, linux 3.5.4).</p>
    </div><!-- .comment-text -->

  </li><!-- .comment --></ol>
</li><!-- .comment -->
  <li id="comment-22538" class="comment even thread-odd thread-alt depth-1 comment reader">

    <a href="http://itreallymatters.net" rel="external nofollow" title="Jarmo Pertman"><img alt='Jarmo Pertman' src='http://1.gravatar.com/avatar/ff97ca87af59ee68ceff5877a8365788?s=80&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG' class='avatar avatar-80 photo' height='80' width='80' /></a><div class="comment-meta comment-meta-data"><div class="comment-author vcard"><cite class="fn" title="http://itreallymatters.net"><a href="http://itreallymatters.net" title="Jarmo Pertman" class="url" rel="external nofollow">Jarmo Pertman</a></cite></div><!-- .comment-author .vcard --> <span class="published"><abbr class="comment-date" title="Thursday, October 4th, 2012, 10:54 am">October 4, 2012</abbr> at <abbr class="comment-time" title="Thursday, October 4th, 2012, 10:54 am">10:54 am</abbr></span> | <a class="permalink" href="/ruby-eventmachine-part-2-asynchronous-not-equal-faster/comment-page-1#comment-22538" title="Permalink to comment ">Permalink</a>  </div>
    <div class="comment-text">

      <p>You could also try Benchmark.bmbm instead of .measure to see if there&#8217;s any effect when having also the rehearsal phase.</p>
    </div><!-- .comment-text -->

  </li><!-- .comment -->
  <li id="comment-24355" class="comment odd alt thread-even depth-1 comment reader">

    <img alt='Nicolás' src='http://1.gravatar.com/avatar/d26aa7a45965be73497f83347f1800f8?s=80&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG' class='avatar avatar-80 photo' height='80' width='80' /><div class="comment-meta comment-meta-data"><div class="comment-author vcard"><cite class="fn">Nicolás</cite></div><!-- .comment-author .vcard --> <span class="published"><abbr class="comment-date" title="Tuesday, October 30th, 2012, 6:18 am">October 30, 2012</abbr> at <abbr class="comment-time" title="Tuesday, October 30th, 2012, 6:18 am">6:18 am</abbr></span> | <a class="permalink" href="/ruby-eventmachine-part-2-asynchronous-not-equal-faster/comment-page-1#comment-24355" title="Permalink to comment ">Permalink</a>  </div>
    <div class="comment-text">

      <p>Greate post! Waiting for part 3!!!</p>
    </div><!-- .comment-text -->

  <ol class='children'>

  <li id="comment-24376" class="comment byuser comment-author-admin bypostauthor even depth-2 comment role-administrator user-admin entry-author">

    <a href="https://www.google.com/profiles/101358683928607234715" rel="external nofollow" title="Phil Whelan"><img alt='Phil Whelan' src='http://1.gravatar.com/avatar/5f357d996da96ccd36d3374e3728bf29?s=80&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG' class='avatar avatar-80 photo' height='80' width='80' /></a><div class="comment-meta comment-meta-data"><div class="comment-author vcard"><cite class="fn" title="https://www.google.com/profiles/101358683928607234715"><a href="https://www.google.com/profiles/101358683928607234715" title="Phil Whelan" class="url" rel="external nofollow">Phil Whelan</a></cite></div><!-- .comment-author .vcard --> <span class="published"><abbr class="comment-date" title="Tuesday, October 30th, 2012, 2:43 pm">October 30, 2012</abbr> at <abbr class="comment-time" title="Tuesday, October 30th, 2012, 2:43 pm">2:43 pm</abbr></span> | <a class="permalink" href="/ruby-eventmachine-part-2-asynchronous-not-equal-faster/comment-page-1#comment-24376" title="Permalink to comment ">Permalink</a>  </div>
    <div class="comment-text">

      <p>Be careful what you wish for&#8230;<br />
<a href="/rubys-eventmachine-part-3-thin" rel="nofollow">http://www.bigfastblog.com/rubys-eventmachine-part-3-thin</a></p>
    </div><!-- .comment-text -->

  </li><!-- .comment --></ol>
</li><!-- .comment -->      </ol><!-- .comment-list -->

              <div class="comment-navigation paged-navigation">
                  </div><!-- .comment-navigation -->

    </div><!-- #comments -->

</div><!-- #comments-template -->

    <div class="navigation-links">
      <a href="/rubys-eventmachine-part-1-event-based-programming" rel="prev"><span class="previous">&laquo; Previous</span></a>      <a href="/ab-testing-in-ruby-on-rails" rel="next"><span class="next">Next &raquo;</span></a>    </div><!-- .navigation-links -->

  </div><!-- .content .hfeed -->

  <div id="primary" class="sidebar aside">

        <div id="popularity-lists-1" class="widget widget_popularity_lists widget-widget_popularity_lists"><div class="widget-inside">      <h3 class="widget-title">Top Posts</h3>      <ul>
      <li><a href="/homebrew-intro-to-the-mac-os-x-package-installer">Homebrew - Intro To The Mac OS X Package Installer</a></li><li><a href="/quoras-technology-examined">Quora's Technology Examined</a></li><li><a href="/gitolite-installation-step-by-step">Gitolite Installation Step-By-Step</a></li><li><a href="/how-to-get-experience-working-with-large-datasets">How To Get Experience Working With Large Datasets</a></li><li><a href="/install-gitolite-to-manage-your-git-repositories">Install Gitolite To Manage Your Git Repositories</a></li><li><a href="/embed-base64-encoded-images-inline-in-html">Embed Base64-Encoded Images Inline In HTML</a></li><li><a href="/map-reduce-with-ruby-using-hadoop">Map-Reduce With Ruby Using Hadoop</a></li><li><a href="/highchart-vs-flot-js-comparing-javascript-graphing-engines">Highchart Vs Flot.js - Comparing JavaScript Graphing Engines </a></li>      </ul>
    </div></div><div id="hybrid-tags-2" class="widget tags widget-tags"><div class="widget-inside"><h3 class="widget-title">Tags</h3><p class="post_tag-cloud term-cloud"><a href='/tag/amazon-ec2' class='tag-link-211' title='6 topics' style='font-size: 15.194444444444pt;'>amazon ec2</a> <a href='/tag/android' class='tag-link-74' title='2 topics' style='font-size: 8pt;'>android</a> <a href='/tag/apple' class='tag-link-20' title='3 topics' style='font-size: 10.333333333333pt;'>apple</a> <a href='/tag/cassandra' class='tag-link-204' title='3 topics' style='font-size: 10.333333333333pt;'>cassandra</a> <a href='/tag/customers-2' class='tag-link-148' title='2 topics' style='font-size: 8pt;'>customers</a> <a href='/tag/data-processing-2' class='tag-link-107' title='5 topics' style='font-size: 13.833333333333pt;'>data processing</a> <a href='/tag/entrepreneur' class='tag-link-123' title='2 topics' style='font-size: 8pt;'>entrepreneur</a> <a href='/tag/entrepreneurship' class='tag-link-117' title='2 topics' style='font-size: 8pt;'>entrepreneurship</a> <a href='/tag/eventmachine-2' class='tag-link-422' title='3 topics' style='font-size: 10.333333333333pt;'>eventmachine</a> <a href='/tag/gem' class='tag-link-274' title='3 topics' style='font-size: 10.333333333333pt;'>gem</a> <a href='/tag/git' class='tag-link-177' title='3 topics' style='font-size: 10.333333333333pt;'>git</a> <a href='/tag/gitolite' class='tag-link-178' title='2 topics' style='font-size: 8pt;'>gitolite</a> <a href='/tag/google' class='tag-link-89' title='2 topics' style='font-size: 8pt;'>google</a> <a href='/tag/hadoop' class='tag-link-102' title='7 topics' style='font-size: 16.166666666667pt;'>hadoop</a> <a href='/tag/hbase' class='tag-link-264' title='4 topics' style='font-size: 12.277777777778pt;'>hbase</a> <a href='/tag/hdfs' class='tag-link-103' title='4 topics' style='font-size: 12.277777777778pt;'>hdfs</a> <a href='/tag/high-scalability' class='tag-link-114' title='3 topics' style='font-size: 10.333333333333pt;'>high scalability</a> <a href='/tag/homebrew' class='tag-link-216' title='4 topics' style='font-size: 12.277777777778pt;'>homebrew</a> <a href='/tag/install' class='tag-link-51' title='2 topics' style='font-size: 8pt;'>install</a> <a href='/tag/iphone' class='tag-link-65' title='2 topics' style='font-size: 8pt;'>iphone</a> <a href='/tag/java' class='tag-link-276' title='3 topics' style='font-size: 10.333333333333pt;'>java</a> <a href='/tag/location' class='tag-link-136' title='2 topics' style='font-size: 8pt;'>location</a> <a href='/tag/mac-osx' class='tag-link-59' title='2 topics' style='font-size: 8pt;'>mac osx</a> <a href='/tag/memcached' class='tag-link-306' title='4 topics' style='font-size: 12.277777777778pt;'>memcached</a> <a href='/tag/mongodb' class='tag-link-210' title='5 topics' style='font-size: 13.833333333333pt;'>mongodb</a> <a href='/tag/mysql' class='tag-link-293' title='3 topics' style='font-size: 10.333333333333pt;'>mysql</a> <a href='/tag/nginx' class='tag-link-326' title='4 topics' style='font-size: 12.277777777778pt;'>nginx</a> <a href='/tag/nosql' class='tag-link-205' title='6 topics' style='font-size: 15.194444444444pt;'>nosql</a> <a href='/tag/perl' class='tag-link-377' title='3 topics' style='font-size: 10.333333333333pt;'>perl</a> <a href='/tag/phone' class='tag-link-72' title='3 topics' style='font-size: 10.333333333333pt;'>phone</a> <a href='/tag/postgresql' class='tag-link-221' title='3 topics' style='font-size: 10.333333333333pt;'>postgresql</a> <a href='/tag/python' class='tag-link-355' title='5 topics' style='font-size: 13.833333333333pt;'>python</a> <a href='/tag/rails' class='tag-link-172' title='2 topics' style='font-size: 8pt;'>rails</a> <a href='/tag/redis' class='tag-link-301' title='3 topics' style='font-size: 10.333333333333pt;'>redis</a> <a href='/tag/ruby' class='tag-link-166' title='15 topics' style='font-size: 22pt;'>ruby</a> <a href='/tag/ruby-on-rails-2' class='tag-link-157' title='6 topics' style='font-size: 15.194444444444pt;'>ruby on rails</a> <a href='/tag/scala' class='tag-link-302' title='3 topics' style='font-size: 10.333333333333pt;'>scala</a> <a href='/tag/ssh-keygen' class='tag-link-180' title='2 topics' style='font-size: 8pt;'>ssh-keygen</a> <a href='/tag/startup' class='tag-link-119' title='3 topics' style='font-size: 10.333333333333pt;'>startup</a> <a href='/tag/tornado' class='tag-link-330' title='6 topics' style='font-size: 15.194444444444pt;'>tornado</a> <a href='/tag/twitter' class='tag-link-133' title='2 topics' style='font-size: 8pt;'>twitter</a> <a href='/tag/vancouver' class='tag-link-120' title='2 topics' style='font-size: 8pt;'>vancouver</a> <a href='/tag/web-development-2' class='tag-link-193' title='5 topics' style='font-size: 13.833333333333pt;'>web-development</a> <a href='/tag/whirr' class='tag-link-223' title='3 topics' style='font-size: 10.333333333333pt;'>whirr</a> <a href='/tag/wikipedia' class='tag-link-174' title='2 topics' style='font-size: 8pt;'>wikipedia</a></p></div></div>

  </div><!-- #primary .aside -->

  </div><!-- #container -->

  <div id="footer-container">

    <div id="footer">

      <small>Copyright &#169; 2016 <a class="site-link" href="/" title="Big Fast Blog" rel="home"><span>Big Fast Blog</span></a> | Vancouver, BC, Canada</small>
    </div><!-- #footer -->

  </div><!-- #footer-container -->

</div><!-- #body-container -->

</body>
</html>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-15826070-1', 'auto');
  ga('send', 'pageview');

</script>
