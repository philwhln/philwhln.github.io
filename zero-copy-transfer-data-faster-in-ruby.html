<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" xml:lang="en-US">
<head profile="http://gmpg.org/xfn/11">
<title>Zero-Copy. Transfer Data Faster In Ruby | Big Fast Blog</title>

<link rel="stylesheet" href="/wp-content/themes/hybrid/style.css" type="text/css" media="screen" />
<link rel="author" href="https://plus.google.com/101358683928607234715/posts"/>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="WordPress 3.0.1" />
<meta name="template" content="Hybrid 0.8" />
<link rel="pingback" href="http://www.bigfastblog.com/xmlrpc.php" />
<link rel="alternate" type="application/rss+xml" title="Big Fast Blog &raquo; Feed" href="http://feeds.feedburner.com/philwhelansblog" />
<link rel="alternate" type="application/rss+xml" title="Big Fast Blog &raquo; Comments Feed" href="http://feeds.feedburner.com/philwhelansblog" />
<link rel="alternate" type="application/rss+xml" title="Big Fast Blog &raquo; Zero-Copy. Transfer Data Faster In Ruby Comments Feed" href="http://www.bigfastblog.com/zero-copy-transfer-data-faster-in-ruby/feed" />
<link rel='stylesheet' id='wp_greet_box_style-css'  href='http://www.bigfastblog.com/wp-content/plugins/wp-greet-box/css/style.css?ver=3.0.1' type='text/css' media='all' />
<link rel='stylesheet' id='rpx_style-css'  href='http://www.bigfastblog.com/wp-content/plugins/rpx/files/style.php?ver=3.0.1' type='text/css' media='all' />
<script type='text/javascript' src='http://www.bigfastblog.com/wp-includes/js/jquery/jquery.js?ver=1.4.2'></script>
<script type='text/javascript' src='http://www.bigfastblog.com/wp-content/plugins/sharebar/js/sharebar.js?ver=3.0.1'></script>
<script type='text/javascript' src='http://www.bigfastblog.com/wp-content/plugins/wp-greet-box/js/functions.js?ver=3.0.1'></script>
<script type='text/javascript' src='http://www.bigfastblog.com/wp-content/plugins/wp-greet-box/js/js-mode.js?ver=3.0.1'></script>
<script type='text/javascript' src='http://www.bigfastblog.com/wp-content/plugins/rpx/files/javascript.php?ver=3.0.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.bigfastblog.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.bigfastblog.com/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Big Fast Blog' href='http://www.bigfastblog.com' />
<link rel='start' title='Firefox &#8211; A must have web browser' href='http://www.bigfastblog.com/firefox-a-must-have-web-browser' />
<link rel='prev' title='The Apache Projects &#8211; The Justice League Of Scalability' href='http://www.bigfastblog.com/the-apache-projects-the-justice-league-of-scalability' />
<link rel='next' title='Hosting Images With Google Storage Manager' href='http://www.bigfastblog.com/hosting-images-google-storage-manager' />
<link rel='shortlink' href='http://www.bigfastblog.com/?p=836' />

<!-- All in One SEO Pack 1.6.12.1 by Michael Torbert of Semper Fi Web Design[275,300] -->
<meta name="description" content="In this post I will explain the concept behind zero-copy, which is feature of the Linux allowing for faster transfer of data between pipes, file-descriptors and sockets. I will demonstrate how you can use this functionality in your Ruby projects using a code example. This functionality has been implemented in C, Java, Ruby, Perl and nameless other languages, but in this blog I will focus on the Ruby usage." />
<meta name="keywords" content="file-server,gem,io,io_splice,java,linux,ruby,splice,zero-copy" />
<link rel="canonical" href="http://www.bigfastblog.com/zero-copy-transfer-data-faster-in-ruby" />
<!-- /all in one seo pack -->

<script type="text/javascript">var AKPC_IDS = "";</script>
	<link rel="stylesheet" href="http://www.bigfastblog.com/wp-content/plugins/sharebar/css/sharebar.css" type="text/css" media="screen" />
<script type="text/javascript">jQuery(document).ready(function($) { $('.sharebar').sharebar({horizontal:'true',swidth:'65',minwidth:1000,position:'left',leftOffset:20,rightOffset:10}); });</script>
<!-- Sharebar Plugin by Monjurul Dolon (http://mdolon.com/) - more info at: http://devgrow.com/sharebar-wordpress-plugin -->


</head>

<body class="wordpress ltr en_US y2016 m05 d22 h13 sunday not-logged-in singular singular-post singular-post-836 single-836 primary-active secondary-inactive subsidiary-inactive">


<div id="body-container">

	
	<div id="header-container">

		<div id="header">

			<a href="/"><img src="http://commondatastorage.googleapis.com/philwhln/blog/images/big_fast_blog_title5.png" width="650" height="191" Alt="Phil Whelan's Big Fast Blog" border="0"></a>

		</div><!-- #header -->

	</div><!-- #header-container -->

	<div id="navigation">
			<div id="page-nav" class="page-nav"></div>
	</div><!-- #navigation -->

	<div id="container">

		
	<div id="content" class="hfeed content">

		
		<div id="utility-before-content" class="sidebar utility">

			<div id="text-13" class="widget widget_text widget-widget_text"><div class="widget-inside">			<div class="textwidget"><a href="https://twitter.com/philwhln" class="twitter-follow-button" data-show-count="true" data-lang="en">Follow @philwhln</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
		</div></div>
		</div><!-- #utility-before-content .utility -->

	
		
			<div id="post-836" class="hentry post publish post-1 odd author-admin category-ruby-2 category-web-development post_tag-file-server post_tag-gem post_tag-io post_tag-iosplice post_tag-java post_tag-linux post_tag-ruby post_tag-splice post_tag-zero-copy">

				<h1 class="post-title entry-title"><a href="http://www.bigfastblog.com/zero-copy-transfer-data-faster-in-ruby" title="Zero-Copy. Transfer Data Faster In Ruby" rel="bookmark">Zero-Copy. Transfer Data Faster In Ruby</a></h1><p class="byline"><span class="byline-prep byline-prep-author">By</span> <span class="author vcard"><a class="url fn n" href="http://www.bigfastblog.com/author/admin/" title="Phil Whelan">Phil Whelan</a></span> <span class="byline-prep byline-prep-published">on</span> <abbr class="published" title="Friday, January 14th, 2011, 1:27 pm">January 14, 2011</abbr> </p>
				<div class="entry-content">
					<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://feeds.feedburner.com/philwhelansblog"  rel="nofollow"><img src="http://www.bigfastblog.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://feeds.feedburner.com/philwhelansblog" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><ul id="sharebar" style="background:#;border-color:#;">
<li><a href="http://twitter.com/share" class="twitter-share-button" data-count="vertical" data-via="philwhln">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></li><li><iframe src="http://www.facebook.com/plugins/like.php?href=http://www.bigfastblog.com/zero-copy-transfer-data-faster-in-ruby&layout=box_count&show_faces=false&width=60&action=like&colorscheme=light&height=45" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:45px; height:60px;" allowTransparency="true"></iframe></li></ul><ul id="sharebarx">
<li><a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="philwhln">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></li><li><iframe src="http://www.facebook.com/plugins/like.php?href=http://www.bigfastblog.com/zero-copy-transfer-data-faster-in-ruby&layout=button_count&show_faces=false&width=85&action=like&colorscheme=light&height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:85px; height:21px;" allowTransparency="true"></iframe></li></ul><p><a href="http://www.flickr.com/photos/zitona/3749382854/" title="McDreamy by Zitona on Flickr"><img src="http://www.bigfastblog.com/wp-content/uploads/2011/01/zero_copy_ruby.jpg" width="270" height="323" alt="Zero-Copy In Ruby Image"" align="left" style="margin-right: 15px" /></a></p>
<p>In this post I will explain the concept behind &#8220;zero-copy&#8221;, which is feature of the Linux allowing for faster transfer of data between pipes, file-descriptors and sockets. I will demonstrate how you can use this functionality in your Ruby projects using a code example. This functionality has been implemented in C, Java, Ruby, Perl and nameless other languages, but in this blog I will focus on the Ruby usage.</p>
<h2>What Is &#8220;Zero-Copy&#8221;?</h2>
<p>The name &#8220;zero-copy&#8221; comes from the fact that the data is not copied from kernel-space to user-space as it usually would be. If you are serving a file, receiving a file, writing to a socket or reading from a socket or pipe and have no interest in programatically looking at the data then you can let the kernel do all the work. Your application runs in user-space and your application defines what you want to do with data as it comes in from various filehandles or sockets and out through other filehandles and sockets. Therefore, it is understandable that the kernel usually needs to pass the data your application, in user-space memory. Zero-copy cuts out the middle-man, your application, when your application is not interested in seeing the data. Roughly speaking, with zero-copy, you can give the kernel two file-descriptors and tell it kernel to &#8220;pass the data from one to the other and let me know when you are done&#8221;.</p>
<h2>How Is This Faster?</h2>
<h3>Less Context-Switching</h3>
<p>If you are reading this, I&#8217;ll assume you are a software developer or someone who can imagine what life would be like if you were a developer (the money, the women, the fame&#8230;). Have you ever tried writing code and being the person on support at the same? It is not easy. Every time you roll up your sleeves and get stuck into fixing that infinite for-loop, you get a call and your brain has start thinking about the problem of person on the other end of line. A day of this and you will get little done. It would be better to just be on support or just fixing infinite for-loops.</p>
<p>When you serve up a static file to the web, the data is read from a file into your application and then your application writes it out to the socket. Even if you are using the lowest-level API in your chosen language for doing this, it is a two-step process and your application has made two requests to the kernel. &#8220;Read this&#8221;. &#8220;Write this&#8221;. Between these two steps the kernel is switching control back to your application and asking, &#8220;what next?&#8221;.</p>
<p>With zero-copy you are saying to kernel, &#8220;read from <em>here</em> and write to <em>there</em>&#8220;. This is can be a single call to the kernel, which means less time passing control back to your application and saying, &#8220;what next?&#8221;.</p>
<h3>Less Copying</h3>
<p>The second reason that zero-copy is faster is because the kernel is not giving you the data. If it did it would have to copy the data from kernel-space to user-space, since kernel-space is for the kernel&#8217;s eyes only. Instead, the kernel knows what to do with that data. It transfers data from one filehandle to the other filehandle without bothering your application unless there is an error, it has completed, or the application has requested the transfer to be <a href="http://en.wikipedia.org/wiki/Asynchronous_I/O">non-blocking</a>.</p>
<h3>&#8220;Splice&#8221;</h3>
<p>This system call that does the magic is called <a href="http://www.kernel.org/doc/man-pages/online/pages/man2/splice.2.html">splice</a>. You can read the <a href="http://www.kernel.org/doc/man-pages/online/pages/man2/splice.2.html">Linux manual page here</a>.</p>
<blockquote><p><strong>splice &#8211; splice data to/from a pipe</strong></p>
<pre style="border: none; background: none; margin: none; padding: none;">ssize_t splice(int fd_in, loff_t *off_in, int fd_out,
               loff_t *off_out, size_t len, unsigned int flags);</pre>
<p><strong>splice()</strong> moves data between two file descriptors without copying between kernel address space and user address space.  It transfers up to <em>len</em> bytes of data from the file descriptor <em>fd_in</em> to the file descriptor <em>fd_out</em>, where one of the descriptors must refer to a pipe.</p>
<p> &#8211; from <a href="http://www.kernel.org/doc/man-pages/online/pages/man2/splice.2.html">Kernel.org : splice(2) &#8211; Linux manual page</a>
</p></blockquote>
<p>The key to note here is that <em>one of the end-points must be a pipe</em>. If neither end-points are a pipe then you can create an intermediary pipe in kernel-space memory and tell the kernel to <em>write to</em> and <em>read from</em> that pipe. You can see <a href="http://www.bigfastblog.com/zero-copy-transfer-data-faster-in-ruby#ruby-example-copy-file-to-file">an example of this below</a>, written in Ruby, where we copy data from one file to another without moving any of the data in user-space memory.</p>
<h2>Server-Side Data Validation</h2>
<p>The down-side to this is when you want to check the data before you send it out. It may make the server snappier, but if the data on disk is prone to corruption, then you would have to rely on the clients letting you know, since your application does not get chance to inspect the data.</p>
<h2>Other Factors</h2>
<p>While you may take some of the burden off the CPU and there is less time spent copying memory, depending on your system and your usage you may not see much difference. Disk seek time and network latency often leave the CPU twiddling it&#8217;s thumbs. Memory copying is very fast. Therefore, you should weigh up the cost and benefits to this. The cost would be the possibly limiting your code to the Linux platform and an additional dependency of the extra code needed to do this (a gem in Ruby&#8217;s case).</p>
<h2> Performance</h2>
<p>If you&#8217;re interested in getting deeper into this or would like to approach it from more of a Java angle, then I recommend checking out &#8220;<a href="http://www.ibm.com/developerworks/library/j-zerocopy/index.html">Efficient data transfer through zero copy</a>&#8221; by <a href="http://www.ibm.com/developerworks/library/j-zerocopy/index.html#author1">Sathish K. Palaniappan</a> and <a href="http://www.ibm.com/developerworks/library/j-zerocopy/index.html#author2">Pramod B. Nagaraja</a>. It&#8217;s from here I take the following performance results.</p>
<table>
<tr>
<th>File size</th>
<th>Non zero-copy</th>
<th>Zero-copy</th>
<th>How much faster?</th>
</tr>
<tr>
<td>7 Mb</td>
<td>156 ms</td>
<td>45ms</td>
<td>346 % faster</td>
</tr>
<tr>
<td>200 Mb</td>
<td>2124 ms</td>
<td>1150 ms</td>
<td>184 % faster</td>
</tr>
<tr>
<td>1 Gb</td>
<td>18399 ms</td>
<td>8537 ms</td>
<td>215 % faster</td>
</tr>
</table>
<p>It is hard to make a clear opinion on the exact speed increase, since the performance change is non-linear, but saying that you get a 2x performance would not be unreasonable.</p>
<p>If you want to run your own tests to replicate this then <a href="http://www.ibm.com/developerworks/apps/download/index.jsp?contentid=333543&#038;filename=j-zerocopy.zip&#038;method=http&#038;locale=worldwide">the Java source code</a> is available on their article.</p>
<p>Some other recent benchmarks by <a href="http://dev.sipdoc.net">Iñaki Baz Castillo</a>, which were written in Ruby, can be found <a href="http://librelist.com/browser//ruby.io.splice/2010/12/22/some-benchmarks/">here</a>. I use code from these benchmarks in <a href="http://www.bigfastblog.com/zero-copy-transfer-data-faster-in-ruby#ruby-example-copy-file-to-file">the example below</a>.</p>
<h2>Ruby Implementation</h2>
<p>In Ruby there is an implementation of zero-copy called <a href="http://bogomips.org/ruby_io_splice">io_splice</a>. This is not supported on Mac OS X, since zero-copy is Linux specific. You will get installation problems if you install this on anything less than Linux Kernel 2.6.17.</p>
<h3>Installing The Gem</h3>
<p>You can install the gem in the same way you install other gems.</p>
<pre>gem install io_splice</pre>
<p>The usual gem install output&#8230;</p>
<pre>Building native extensions.  This could take a while...
Successfully installed io_splice-2.2.0
1 gem installed
Installing ri documentation for io_splice-2.2.0...
Installing RDoc documentation for io_splice-2.2.0...</pre>
<p><a id="ruby-example-copy-file-to-file"></a></p>
<h3>Ruby Example &#8211; Copy File To File</h3>
<p>In this example I will copy a file from one location to another.</p>
<p>Let&#8217;s create an input file first, called <em>input_file.txt</em></p>
<pre>ruby -e '1_000_000.times { puts rand.to_s }' &gt; input_file.txt</pre>
<p>Now, I&#8217;m going to write a short Ruby script called <em>test_filecopy.rb</em>. I have taken the meat of this script from <a href="http://dev.sipdoc.net">Iñaki Baz Castillo</a>&#8216;s benchmark code. </p>
<pre>#!/usr/bin/ruby

require 'io/splice'

SRC_FILE = "input_file.txt"
DST_FILE = "output_file.txt"

source = File.open(SRC_FILE, 'rb')
dest = File.open(DST_FILE, 'wb')
source_fd = source.fileno
dest_fd = dest.fileno

# We use a pipe as a ring buffer in kernel space.
# pipes may store up to IO::Splice::PIPE_CAPA bytes
pipe = IO.pipe
rfd, wfd = pipe.map { |io| io.fileno }

while true

  nread = begin
    # first pull as many bytes as possible into the pipe
    IO.splice(source_fd, nil, wfd, nil, IO::Splice::PIPE_CAPA, 0)
  rescue EOFError
    # The end of the file has been reached
    break
  end

  # now move the contents of the pipe buffer into the destination file
  # the copied data never enters userspace
  nwritten = IO.splice(rfd, nil, dest_fd, nil, nread, 0)

end
</pre>
<p>Sure enough, it copied the file. Although, if you were paying attention, you will realize that even though we did not read the data into user-space memory, we still copied it into an intermediary pipe in kernel-space memory. We also had an extra context switch back to our code between the reading from one file and writing to the other. This is because we cannot use zero-copy to transfer directly from one file-descriptor to another file-descriptor without one of the end-points being a pipe. To get around this we created the in-kernel-memory pipe as an intermediary.</p>
<h2>Conclusion</h2>
<p>Zero-copy is way to increase performance when transferring static data between two end-points on your system. A good use-case for this is serving files to the web. Even though the disk is still a major bottle-neck, benchmarks do show it to be faster. If validating the data going out of your system is important to you then zero-copy may not be the solution you are looking for, as the data never enters user-space, so there is no chance to inspect it.</p>
<h2>Resources</h2>
<ul>
<li><a href="http://en.wikipedia.org/wiki/Zero-copy">Zero-Copy On Wikipedia</a></li>
<li><a href="http://www.linuxjournal.com/article/6345">Zero Copy I: User-Mode Perspective</a>
<li><a href="http://bogomips.org/ruby_io_splice/IO.html">&#8220;Ruby IO Splice&#8221; Documentation</a></li>
<li><a href="http://www.kernel.org/doc/man-pages/online/pages/man2/splice.2.html">Splice man-page</a></li>
<li><a href="http://www.ibm.com/developerworks/library/j-zerocopy/index.html">Efficient data transfer through zero copy</a></li>
<li><a href="http://bogomips.org/ruby_io_splice/">Ruby IO Splice Homepage</a></li>
<li><a href="http://stackoverflow.com/questions/3137594/how-to-create-pi-sequentially-in-ruby">How to create PI sequentially in Ruby</a></li>
</ul>
<h2>Posted in : <a href="http://www.bigfastblog.com/category/ruby-2"> Ruby</a></h2>
<div id="post-484" class="hentry post publish post-7 odd author-admin category-data-processing category-hadoop-2 category-ruby-2 post_tag-amazon-ec2 post_tag-bash post_tag-cloudera post_tag-data-processing-2 post_tag-hadoop post_tag-hadoop-cluster post_tag-hadoop-streaming post_tag-hdfs post_tag-jclouds post_tag-map-reduce post_tag-ruby post_tag-whirr">
<h2 class="entry-title"><a href="http://www.bigfastblog.com/map-reduce-with-ruby-using-hadoop" title="Map-Reduce With Ruby Using Hadoop" rel="bookmark">Map-Reduce With Ruby Using Hadoop</a></h2>
<p class="byline"><span class="byline-prep byline-prep-author">By</span> <span class="author vcard"><a class="url fn n" href="http://www.bigfastblog.com/author/admin/" title="Phil Whelan">Phil Whelan</a></span> <span class="byline-prep byline-prep-published">on</span> <abbr class="published" title="Friday, December 31st, 2010, 9:38 am">December 31, 2010</abbr> </p>
<div style="float: left;"><img width="180" height="180" src="http://www.bigfastblog.com/wp-content/uploads/2010/12/hadoop_ruby_sq.jpg" class="attachment-post-thumbnail wp-post-image" alt="hadoop_ruby_sq" title="hadoop_ruby_sq"></div>
<div class="entry-content">
<p>Here I demonstrate, with repeatable steps, how to fire-up a Hadoop cluster on Amazon EC2, load data onto the HDFS (Hadoop Distributed File-System), write map-reduce scripts in Ruby and use them to run a map-reduce job on your Hadoop cluster. You will <em>not</em> need to ssh into the cluster, as all tasks are run from your local machine. Below I am using my MacBook Pro as my local machine, but the steps I have provided should be reproducible on other platforms running bash and Java.</p>
</p></div>
<p><!-- .entry-content --></p>
<div class="continue-reading"><a href="http://www.bigfastblog.com/map-reduce-with-ruby-using-hadoop"><strong>Continue reading&#8230;</strong></a></div>
</div>
<script type="text/javascript">AKPC_IDS += "836,";</script>									</div><!-- .entry-content -->

				<p class="entry-meta"><span class="category">Posted in <a href="http://www.bigfastblog.com/category/ruby-2" rel="tag">Ruby</a>, <a href="http://www.bigfastblog.com/category/web-development" rel="tag">Web Development</a></span> <span class="post_tag">| Tagged <a href="http://www.bigfastblog.com/tag/file-server" rel="tag">file-server</a>, <a href="http://www.bigfastblog.com/tag/gem" rel="tag">gem</a>, <a href="http://www.bigfastblog.com/tag/io" rel="tag">io</a>, <a href="http://www.bigfastblog.com/tag/io_splice" rel="tag">io_splice</a>, <a href="http://www.bigfastblog.com/tag/java" rel="tag">java</a>, <a href="http://www.bigfastblog.com/tag/linux" rel="tag">linux</a>, <a href="http://www.bigfastblog.com/tag/ruby" rel="tag">ruby</a>, <a href="http://www.bigfastblog.com/tag/splice" rel="tag">splice</a>, <a href="http://www.bigfastblog.com/tag/zero-copy" rel="tag">zero-copy</a></span> | <a class="comments-link" href="http://www.bigfastblog.com/zero-copy-transfer-data-faster-in-ruby#comments" title="Comment on Zero-Copy. Transfer Data Faster In Ruby">2 Responses</a></p>
			</div><!-- .hentry -->

			
		<div id="utility-after-singular" class="sidebar utility">

			<div id="text-16" class="widget widget_text widget-widget_text"><div class="widget-inside">			<div class="textwidget"><a href="https://twitter.com/philwhln" class="twitter-follow-button" data-show-count="true" data-lang="en">Follow @philwhln</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
		</div></div>
		</div><!-- #utility-after-singular .utility -->

	
			
<div id="comments-template">

	
		<div id="comments">

			<h3 id="comments-number" class="comments-header">2 responses to &#8220;Zero-Copy. Transfer Data Faster In Ruby&#8221;</h3>

			
			<ol class="comment-list">
				
	<li id="comment-807" class="comment even thread-even depth-1 comment reader">

		<a href="http://russbrooks.com" rel="external nofollow" title="iq9"><img alt='iq9' src='http://0.gravatar.com/avatar/092ff97a9cf1189c671baecc59f8bf65?s=80&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG' class='avatar avatar-80 photo' height='80' width='80' /></a><div class="comment-meta comment-meta-data"><div class="comment-author vcard"><cite class="fn" title="http://russbrooks.com"><a href="http://russbrooks.com" title="iq9" class="url" rel="external nofollow">iq9</a></cite></div><!-- .comment-author .vcard --> <span class="published"><abbr class="comment-date" title="Thursday, January 20th, 2011, 8:08 am">January 20, 2011</abbr> at <abbr class="comment-time" title="Thursday, January 20th, 2011, 8:08 am">8:08 am</abbr></span> | <a class="permalink" href="http://www.bigfastblog.com/zero-copy-transfer-data-faster-in-ruby/comment-page-1#comment-807" title="Permalink to comment ">Permalink</a>  </div>
		<div class="comment-text">
			
			<p>It would be interesting to see straight calls to `cp` in their benchmarks. <a href="http://librelist.com/browser//ruby.io.splice/2010/12/22/some-benchmarks/" rel="nofollow">http://librelist.com/browser//ruby.io.splice/2010/12/22/some-benchmarks/</a></p>
		</div><!-- .comment-text -->

		
	</li><!-- .comment -->
	<li id="comment-813" class="comment odd alt thread-odd thread-alt depth-1 comment reader">

		<img alt='Carl Youngblood' src='http://0.gravatar.com/avatar/eca15b2b601e7e577d38bd5210a753ac?s=80&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=PG' class='avatar avatar-80 photo' height='80' width='80' /><div class="comment-meta comment-meta-data"><div class="comment-author vcard"><cite class="fn">Carl Youngblood</cite></div><!-- .comment-author .vcard --> <span class="published"><abbr class="comment-date" title="Thursday, January 20th, 2011, 11:51 pm">January 20, 2011</abbr> at <abbr class="comment-time" title="Thursday, January 20th, 2011, 11:51 pm">11:51 pm</abbr></span> | <a class="permalink" href="http://www.bigfastblog.com/zero-copy-transfer-data-faster-in-ruby/comment-page-1#comment-813" title="Permalink to comment ">Permalink</a>  </div>
		<div class="comment-text">
			
			<p>I wonder if someone more familiar with OSX is aware of another construct in BSD land for doing the same thing. Any takers?</p>
		</div><!-- .comment-text -->

		
	</li><!-- .comment -->			</ol><!-- .comment-list -->

			
							<div class="comment-navigation paged-navigation">
									</div><!-- .comment-navigation -->
			
		</div><!-- #comments -->

	
									
</div><!-- #comments-template -->
			
		
		
	
		<div class="navigation-links">
			<a href="http://www.bigfastblog.com/the-apache-projects-the-justice-league-of-scalability" rel="prev"><span class="previous">&laquo; Previous</span></a>			<a href="http://www.bigfastblog.com/hosting-images-google-storage-manager" rel="next"><span class="next">Next &raquo;</span></a>		</div><!-- .navigation-links -->

	
	</div><!-- .content .hfeed -->

		
	<div id="primary" class="sidebar aside">

		
				<div id="popularity-lists-1" class="widget widget_popularity_lists widget-widget_popularity_lists"><div class="widget-inside">			<h3 class="widget-title">Top Posts</h3>			<ul>
			<li><a href="http://www.bigfastblog.com/homebrew-intro-to-the-mac-os-x-package-installer">Homebrew - Intro To The Mac OS X Package Installer</a></li><li><a href="http://www.bigfastblog.com/quoras-technology-examined">Quora's Technology Examined</a></li><li><a href="http://www.bigfastblog.com/gitolite-installation-step-by-step">Gitolite Installation Step-By-Step</a></li><li><a href="http://www.bigfastblog.com/how-to-get-experience-working-with-large-datasets">How To Get Experience Working With Large Datasets</a></li><li><a href="http://www.bigfastblog.com/install-gitolite-to-manage-your-git-repositories">Install Gitolite To Manage Your Git Repositories</a></li><li><a href="http://www.bigfastblog.com/embed-base64-encoded-images-inline-in-html">Embed Base64-Encoded Images Inline In HTML</a></li><li><a href="http://www.bigfastblog.com/map-reduce-with-ruby-using-hadoop">Map-Reduce With Ruby Using Hadoop</a></li><li><a href="http://www.bigfastblog.com/highchart-vs-flot-js-comparing-javascript-graphing-engines">Highchart Vs Flot.js - Comparing JavaScript Graphing Engines </a></li>			</ul>
		</div></div><div id="hybrid-tags-2" class="widget tags widget-tags"><div class="widget-inside"><h3 class="widget-title">Tags</h3><p class="post_tag-cloud term-cloud"><a href='http://www.bigfastblog.com/tag/amazon-ec2' class='tag-link-211' title='6 topics' style='font-size: 15.194444444444pt;'>amazon ec2</a> <a href='http://www.bigfastblog.com/tag/android' class='tag-link-74' title='2 topics' style='font-size: 8pt;'>android</a> <a href='http://www.bigfastblog.com/tag/apple' class='tag-link-20' title='3 topics' style='font-size: 10.333333333333pt;'>apple</a> <a href='http://www.bigfastblog.com/tag/cassandra' class='tag-link-204' title='3 topics' style='font-size: 10.333333333333pt;'>cassandra</a> <a href='http://www.bigfastblog.com/tag/customers-2' class='tag-link-148' title='2 topics' style='font-size: 8pt;'>customers</a> <a href='http://www.bigfastblog.com/tag/data-processing-2' class='tag-link-107' title='5 topics' style='font-size: 13.833333333333pt;'>data processing</a> <a href='http://www.bigfastblog.com/tag/entrepreneur' class='tag-link-123' title='2 topics' style='font-size: 8pt;'>entrepreneur</a> <a href='http://www.bigfastblog.com/tag/entrepreneurship' class='tag-link-117' title='2 topics' style='font-size: 8pt;'>entrepreneurship</a> <a href='http://www.bigfastblog.com/tag/eventmachine-2' class='tag-link-422' title='3 topics' style='font-size: 10.333333333333pt;'>eventmachine</a> <a href='http://www.bigfastblog.com/tag/gem' class='tag-link-274' title='3 topics' style='font-size: 10.333333333333pt;'>gem</a> <a href='http://www.bigfastblog.com/tag/git' class='tag-link-177' title='3 topics' style='font-size: 10.333333333333pt;'>git</a> <a href='http://www.bigfastblog.com/tag/gitolite' class='tag-link-178' title='2 topics' style='font-size: 8pt;'>gitolite</a> <a href='http://www.bigfastblog.com/tag/google' class='tag-link-89' title='2 topics' style='font-size: 8pt;'>google</a> <a href='http://www.bigfastblog.com/tag/hadoop' class='tag-link-102' title='7 topics' style='font-size: 16.166666666667pt;'>hadoop</a> <a href='http://www.bigfastblog.com/tag/hbase' class='tag-link-264' title='4 topics' style='font-size: 12.277777777778pt;'>hbase</a> <a href='http://www.bigfastblog.com/tag/hdfs' class='tag-link-103' title='4 topics' style='font-size: 12.277777777778pt;'>hdfs</a> <a href='http://www.bigfastblog.com/tag/high-scalability' class='tag-link-114' title='3 topics' style='font-size: 10.333333333333pt;'>high scalability</a> <a href='http://www.bigfastblog.com/tag/homebrew' class='tag-link-216' title='4 topics' style='font-size: 12.277777777778pt;'>homebrew</a> <a href='http://www.bigfastblog.com/tag/install' class='tag-link-51' title='2 topics' style='font-size: 8pt;'>install</a> <a href='http://www.bigfastblog.com/tag/iphone' class='tag-link-65' title='2 topics' style='font-size: 8pt;'>iphone</a> <a href='http://www.bigfastblog.com/tag/java' class='tag-link-276' title='3 topics' style='font-size: 10.333333333333pt;'>java</a> <a href='http://www.bigfastblog.com/tag/location' class='tag-link-136' title='2 topics' style='font-size: 8pt;'>location</a> <a href='http://www.bigfastblog.com/tag/mac-osx' class='tag-link-59' title='2 topics' style='font-size: 8pt;'>mac osx</a> <a href='http://www.bigfastblog.com/tag/memcached' class='tag-link-306' title='4 topics' style='font-size: 12.277777777778pt;'>memcached</a> <a href='http://www.bigfastblog.com/tag/mongodb' class='tag-link-210' title='5 topics' style='font-size: 13.833333333333pt;'>mongodb</a> <a href='http://www.bigfastblog.com/tag/mysql' class='tag-link-293' title='3 topics' style='font-size: 10.333333333333pt;'>mysql</a> <a href='http://www.bigfastblog.com/tag/nginx' class='tag-link-326' title='4 topics' style='font-size: 12.277777777778pt;'>nginx</a> <a href='http://www.bigfastblog.com/tag/nosql' class='tag-link-205' title='6 topics' style='font-size: 15.194444444444pt;'>nosql</a> <a href='http://www.bigfastblog.com/tag/perl' class='tag-link-377' title='3 topics' style='font-size: 10.333333333333pt;'>perl</a> <a href='http://www.bigfastblog.com/tag/phone' class='tag-link-72' title='3 topics' style='font-size: 10.333333333333pt;'>phone</a> <a href='http://www.bigfastblog.com/tag/postgresql' class='tag-link-221' title='3 topics' style='font-size: 10.333333333333pt;'>postgresql</a> <a href='http://www.bigfastblog.com/tag/python' class='tag-link-355' title='5 topics' style='font-size: 13.833333333333pt;'>python</a> <a href='http://www.bigfastblog.com/tag/rails' class='tag-link-172' title='2 topics' style='font-size: 8pt;'>rails</a> <a href='http://www.bigfastblog.com/tag/redis' class='tag-link-301' title='3 topics' style='font-size: 10.333333333333pt;'>redis</a> <a href='http://www.bigfastblog.com/tag/ruby' class='tag-link-166' title='15 topics' style='font-size: 22pt;'>ruby</a> <a href='http://www.bigfastblog.com/tag/ruby-on-rails-2' class='tag-link-157' title='6 topics' style='font-size: 15.194444444444pt;'>ruby on rails</a> <a href='http://www.bigfastblog.com/tag/scala' class='tag-link-302' title='3 topics' style='font-size: 10.333333333333pt;'>scala</a> <a href='http://www.bigfastblog.com/tag/ssh-keygen' class='tag-link-180' title='2 topics' style='font-size: 8pt;'>ssh-keygen</a> <a href='http://www.bigfastblog.com/tag/startup' class='tag-link-119' title='3 topics' style='font-size: 10.333333333333pt;'>startup</a> <a href='http://www.bigfastblog.com/tag/tornado' class='tag-link-330' title='6 topics' style='font-size: 15.194444444444pt;'>tornado</a> <a href='http://www.bigfastblog.com/tag/twitter' class='tag-link-133' title='2 topics' style='font-size: 8pt;'>twitter</a> <a href='http://www.bigfastblog.com/tag/vancouver' class='tag-link-120' title='2 topics' style='font-size: 8pt;'>vancouver</a> <a href='http://www.bigfastblog.com/tag/web-development-2' class='tag-link-193' title='5 topics' style='font-size: 13.833333333333pt;'>web-development</a> <a href='http://www.bigfastblog.com/tag/whirr' class='tag-link-223' title='3 topics' style='font-size: 10.333333333333pt;'>whirr</a> <a href='http://www.bigfastblog.com/tag/wikipedia' class='tag-link-174' title='2 topics' style='font-size: 8pt;'>wikipedia</a></p></div></div>
		
	</div><!-- #primary .aside -->


	</div><!-- #container -->

	<div id="footer-container">

		
		<div id="footer">

			<small>Copyright &#169; 2016 <a class="site-link" href="http://www.bigfastblog.com" title="Big Fast Blog" rel="home"><span>Big Fast Blog</span></a> | Vancouver, BC, Canada</small>
		</div><!-- #footer -->

		
	</div><!-- #footer-container -->

</div><!-- #body-container -->


<script type="text/javascript">
jQuery(function() {
	
	jQuery.post("index.php",{ak_action:"api_record_view", ids: AKPC_IDS, type:"single"}, false, "json");
});
</script>
	
<!-- Ockamo -->
<script>
var s = ("https:" == document.location.protocol) ? "https://ssl.ockamo.com/js/scripts/secure.js" : "http://ockamo.com/js/scripts/capture.js";
document.write(unescape("%3Cscript src='"+s+"' type='text/javascript'%3E%3C/script%3E"));
</script>
<!-- /Ockamo -->

</body>
</html>
<!-- WP Super Cache is installed but broken. The path to wp-cache-phase1.php in wp-content/advanced-cache.php must be fixed! -->